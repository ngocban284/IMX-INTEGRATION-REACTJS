{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ngocban/Desktop/imx-integration-reactjs/node_modules/@babel/runtime/regenerator/index.js\";\nimport { MagicPayloadMethod as e, RPCErrorCode as t, SDKErrorCode as r, SDKWarningCode as n, MagicOutgoingWindowMessage as o, MagicIncomingWindowMessage as i } from \"@magic-sdk/types\";\n\nfunction s(e) {\n  var t = {\n    exports: {}\n  };\n  return e(t, t.exports), t.exports;\n}\n\nfunction a(e, t) {\n  for (var r = 0; r < t.length; r++) {\n    var n = t[r];\n    n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n  }\n}\n\nfunction c(e, t, r) {\n  return t && a(e.prototype, t), r && a(e, r), e;\n}\n\nfunction u() {\n  return (u = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction l(e, t) {\n  e.prototype = Object.create(t.prototype), e.prototype.constructor = e, f(e, t);\n}\n\nfunction h(e) {\n  return (h = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {\n    return e.__proto__ || Object.getPrototypeOf(e);\n  })(e);\n}\n\nfunction f(e, t) {\n  return (f = Object.setPrototypeOf || function (e, t) {\n    return e.__proto__ = t, e;\n  })(e, t);\n}\n\nfunction p() {\n  if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n  if (Reflect.construct.sham) return !1;\n  if (\"function\" == typeof Proxy) return !0;\n\n  try {\n    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;\n  } catch (e) {\n    return !1;\n  }\n}\n\nfunction d(e, t, r) {\n  return (d = p() ? Reflect.construct : function (e, t, r) {\n    var n = [null];\n    n.push.apply(n, t);\n    var o = new (Function.bind.apply(e, n))();\n    return r && f(o, r.prototype), o;\n  }).apply(null, arguments);\n}\n\nfunction v(e) {\n  var t = \"function\" == typeof Map ? new Map() : void 0;\n  return (v = function (e) {\n    if (null === e || -1 === Function.toString.call(e).indexOf(\"[native code]\")) return e;\n    if (\"function\" != typeof e) throw new TypeError(\"Super expression must either be null or a function\");\n\n    if (void 0 !== t) {\n      if (t.has(e)) return t.get(e);\n      t.set(e, r);\n    }\n\n    function r() {\n      return d(e, arguments, h(this).constructor);\n    }\n\n    return r.prototype = Object.create(e.prototype, {\n      constructor: {\n        value: r,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), f(r, e);\n  })(e);\n}\n\nfunction E(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\n\ns(function (e) {\n  var t = function (e) {\n    var t,\n        r = Object.prototype,\n        n = r.hasOwnProperty,\n        o = \"function\" == typeof Symbol ? Symbol : {},\n        i = o.iterator || \"@@iterator\",\n        s = o.asyncIterator || \"@@asyncIterator\",\n        a = o.toStringTag || \"@@toStringTag\";\n\n    function c(e, t, r) {\n      return Object.defineProperty(e, t, {\n        value: r,\n        enumerable: !0,\n        configurable: !0,\n        writable: !0\n      }), e[t];\n    }\n\n    try {\n      c({}, \"\");\n    } catch (e) {\n      c = function (e, t, r) {\n        return e[t] = r;\n      };\n    }\n\n    function u(e, t, r, n) {\n      var o = Object.create((t && t.prototype instanceof E ? t : E).prototype),\n          i = new T(n || []);\n      return o._invoke = function (e, t, r) {\n        var n = h;\n        return function (o, i) {\n          if (n === p) throw new Error(\"Generator is already running\");\n\n          if (n === d) {\n            if (\"throw\" === o) throw i;\n            return S();\n          }\n\n          for (r.method = o, r.arg = i;;) {\n            var s = r.delegate;\n\n            if (s) {\n              var a = L(s, r);\n\n              if (a) {\n                if (a === v) continue;\n                return a;\n              }\n            }\n\n            if (\"next\" === r.method) r.sent = r._sent = r.arg;else if (\"throw\" === r.method) {\n              if (n === h) throw n = d, r.arg;\n              r.dispatchException(r.arg);\n            } else \"return\" === r.method && r.abrupt(\"return\", r.arg);\n            n = p;\n            var c = l(e, t, r);\n\n            if (\"normal\" === c.type) {\n              if (n = r.done ? d : f, c.arg === v) continue;\n              return {\n                value: c.arg,\n                done: r.done\n              };\n            }\n\n            \"throw\" === c.type && (n = d, r.method = \"throw\", r.arg = c.arg);\n          }\n        };\n      }(e, r, i), o;\n    }\n\n    function l(e, t, r) {\n      try {\n        return {\n          type: \"normal\",\n          arg: e.call(t, r)\n        };\n      } catch (e) {\n        return {\n          type: \"throw\",\n          arg: e\n        };\n      }\n    }\n\n    e.wrap = u;\n    var h = \"suspendedStart\",\n        f = \"suspendedYield\",\n        p = \"executing\",\n        d = \"completed\",\n        v = {};\n\n    function E() {}\n\n    function m() {}\n\n    function y() {}\n\n    var g = {};\n    c(g, i, function () {\n      return this;\n    });\n    var I = Object.getPrototypeOf,\n        w = I && I(I(P([])));\n    w && w !== r && n.call(w, i) && (g = w);\n    var R = y.prototype = E.prototype = Object.create(g);\n\n    function O(e) {\n      [\"next\", \"throw\", \"return\"].forEach(function (t) {\n        c(e, t, function (e) {\n          return this._invoke(t, e);\n        });\n      });\n    }\n\n    function _(e, t) {\n      function r(o, i, s, a) {\n        var c = l(e[o], e, i);\n\n        if (\"throw\" !== c.type) {\n          var u = c.arg,\n              h = u.value;\n          return h && \"object\" == typeof h && n.call(h, \"__await\") ? t.resolve(h.__await).then(function (e) {\n            r(\"next\", e, s, a);\n          }, function (e) {\n            r(\"throw\", e, s, a);\n          }) : t.resolve(h).then(function (e) {\n            u.value = e, s(u);\n          }, function (e) {\n            return r(\"throw\", e, s, a);\n          });\n        }\n\n        a(c.arg);\n      }\n\n      var o;\n\n      this._invoke = function (e, n) {\n        function i() {\n          return new t(function (t, o) {\n            r(e, n, t, o);\n          });\n        }\n\n        return o = o ? o.then(i, i) : i();\n      };\n    }\n\n    function L(e, r) {\n      var n = e.iterator[r.method];\n\n      if (n === t) {\n        if (r.delegate = null, \"throw\" === r.method) {\n          if (e.iterator.return && (r.method = \"return\", r.arg = t, L(e, r), \"throw\" === r.method)) return v;\n          r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n\n        return v;\n      }\n\n      var o = l(n, e.iterator, r.arg);\n      if (\"throw\" === o.type) return r.method = \"throw\", r.arg = o.arg, r.delegate = null, v;\n      var i = o.arg;\n      return i ? i.done ? (r[e.resultName] = i.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, v) : i : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, v);\n    }\n\n    function N(e) {\n      var t = {\n        tryLoc: e[0]\n      };\n      1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);\n    }\n\n    function A(e) {\n      var t = e.completion || {};\n      t.type = \"normal\", delete t.arg, e.completion = t;\n    }\n\n    function T(e) {\n      this.tryEntries = [{\n        tryLoc: \"root\"\n      }], e.forEach(N, this), this.reset(!0);\n    }\n\n    function P(e) {\n      if (e) {\n        var r = e[i];\n        if (r) return r.call(e);\n        if (\"function\" == typeof e.next) return e;\n\n        if (!isNaN(e.length)) {\n          var o = -1,\n              s = function r() {\n            for (; ++o < e.length;) if (n.call(e, o)) return r.value = e[o], r.done = !1, r;\n\n            return r.value = t, r.done = !0, r;\n          };\n\n          return s.next = s;\n        }\n      }\n\n      return {\n        next: S\n      };\n    }\n\n    function S() {\n      return {\n        value: t,\n        done: !0\n      };\n    }\n\n    return m.prototype = y, c(R, \"constructor\", y), c(y, \"constructor\", m), m.displayName = c(y, a, \"GeneratorFunction\"), e.isGeneratorFunction = function (e) {\n      var t = \"function\" == typeof e && e.constructor;\n      return !!t && (t === m || \"GeneratorFunction\" === (t.displayName || t.name));\n    }, e.mark = function (e) {\n      return Object.setPrototypeOf ? Object.setPrototypeOf(e, y) : (e.__proto__ = y, c(e, a, \"GeneratorFunction\")), e.prototype = Object.create(R), e;\n    }, e.awrap = function (e) {\n      return {\n        __await: e\n      };\n    }, O(_.prototype), c(_.prototype, s, function () {\n      return this;\n    }), e.AsyncIterator = _, e.async = function (t, r, n, o, i) {\n      void 0 === i && (i = Promise);\n      var s = new _(u(t, r, n, o), i);\n      return e.isGeneratorFunction(r) ? s : s.next().then(function (e) {\n        return e.done ? e.value : s.next();\n      });\n    }, O(R), c(R, a, \"Generator\"), c(R, i, function () {\n      return this;\n    }), c(R, \"toString\", function () {\n      return \"[object Generator]\";\n    }), e.keys = function (e) {\n      var t = [];\n\n      for (var r in e) t.push(r);\n\n      return t.reverse(), function r() {\n        for (; t.length;) {\n          var n = t.pop();\n          if (n in e) return r.value = n, r.done = !1, r;\n        }\n\n        return r.done = !0, r;\n      };\n    }, e.values = P, T.prototype = {\n      constructor: T,\n      reset: function (e) {\n        if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(A), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n      },\n      stop: function () {\n        this.done = !0;\n        var e = this.tryEntries[0].completion;\n        if (\"throw\" === e.type) throw e.arg;\n        return this.rval;\n      },\n      dispatchException: function (e) {\n        if (this.done) throw e;\n        var r = this;\n\n        function o(n, o) {\n          return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n        }\n\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var s = this.tryEntries[i],\n              a = s.completion;\n          if (\"root\" === s.tryLoc) return o(\"end\");\n\n          if (s.tryLoc <= this.prev) {\n            var c = n.call(s, \"catchLoc\"),\n                u = n.call(s, \"finallyLoc\");\n\n            if (c && u) {\n              if (this.prev < s.catchLoc) return o(s.catchLoc, !0);\n              if (this.prev < s.finallyLoc) return o(s.finallyLoc);\n            } else if (c) {\n              if (this.prev < s.catchLoc) return o(s.catchLoc, !0);\n            } else {\n              if (!u) throw new Error(\"try statement without catch or finally\");\n              if (this.prev < s.finallyLoc) return o(s.finallyLoc);\n            }\n          }\n        }\n      },\n      abrupt: function (e, t) {\n        for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n          var o = this.tryEntries[r];\n\n          if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n            var i = o;\n            break;\n          }\n        }\n\n        i && (\"break\" === e || \"continue\" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null);\n        var s = i ? i.completion : {};\n        return s.type = e, s.arg = t, i ? (this.method = \"next\", this.next = i.finallyLoc, v) : this.complete(s);\n      },\n      complete: function (e, t) {\n        if (\"throw\" === e.type) throw e.arg;\n        return \"break\" === e.type || \"continue\" === e.type ? this.next = e.arg : \"return\" === e.type ? (this.rval = this.arg = e.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === e.type && t && (this.next = t), v;\n      },\n      finish: function (e) {\n        for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n          var r = this.tryEntries[t];\n          if (r.finallyLoc === e) return this.complete(r.completion, r.afterLoc), A(r), v;\n        }\n      },\n      catch: function (e) {\n        for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n          var r = this.tryEntries[t];\n\n          if (r.tryLoc === e) {\n            var n = r.completion;\n\n            if (\"throw\" === n.type) {\n              var o = n.arg;\n              A(r);\n            }\n\n            return o;\n          }\n        }\n\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function (e, r, n) {\n        return this.delegate = {\n          iterator: P(e),\n          resultName: r,\n          nextLoc: n\n        }, \"next\" === this.method && (this.arg = t), v;\n      }\n    }, e;\n  }(e.exports);\n\n  try {\n    regeneratorRuntime = t;\n  } catch (e) {\n    \"object\" == typeof globalThis ? globalThis.regeneratorRuntime = t : Function(\"r\", \"regeneratorRuntime = r\")(t);\n  }\n});\n\nvar m,\n    y = {\n  SEMVER_SPEC_VERSION: \"2.0.0\",\n  MAX_LENGTH: 256,\n  MAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER || 9007199254740991,\n  MAX_SAFE_COMPONENT_LENGTH: 16\n},\n    g = \"object\" == typeof process && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? function () {\n  var e;\n  return (e = console).error.apply(e, [\"SEMVER\"].concat([].slice.call(arguments)));\n} : function () {},\n    I = (function (e, t) {\n  var r = y.MAX_SAFE_COMPONENT_LENGTH,\n      n = (t = e.exports = {}).re = [],\n      o = t.src = [],\n      i = t.t = {},\n      s = 0,\n      a = function (e, t, r) {\n    var a = s++;\n    g(a, t), i[e] = a, o[a] = t, n[a] = new RegExp(t, r ? \"g\" : void 0);\n  };\n\n  a(\"NUMERICIDENTIFIER\", \"0|[1-9]\\\\d*\"), a(\"NUMERICIDENTIFIERLOOSE\", \"[0-9]+\"), a(\"NONNUMERICIDENTIFIER\", \"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"), a(\"MAINVERSION\", \"(\" + o[i.NUMERICIDENTIFIER] + \")\\\\.(\" + o[i.NUMERICIDENTIFIER] + \")\\\\.(\" + o[i.NUMERICIDENTIFIER] + \")\"), a(\"MAINVERSIONLOOSE\", \"(\" + o[i.NUMERICIDENTIFIERLOOSE] + \")\\\\.(\" + o[i.NUMERICIDENTIFIERLOOSE] + \")\\\\.(\" + o[i.NUMERICIDENTIFIERLOOSE] + \")\"), a(\"PRERELEASEIDENTIFIER\", \"(?:\" + o[i.NUMERICIDENTIFIER] + \"|\" + o[i.NONNUMERICIDENTIFIER] + \")\"), a(\"PRERELEASEIDENTIFIERLOOSE\", \"(?:\" + o[i.NUMERICIDENTIFIERLOOSE] + \"|\" + o[i.NONNUMERICIDENTIFIER] + \")\"), a(\"PRERELEASE\", \"(?:-(\" + o[i.PRERELEASEIDENTIFIER] + \"(?:\\\\.\" + o[i.PRERELEASEIDENTIFIER] + \")*))\"), a(\"PRERELEASELOOSE\", \"(?:-?(\" + o[i.PRERELEASEIDENTIFIERLOOSE] + \"(?:\\\\.\" + o[i.PRERELEASEIDENTIFIERLOOSE] + \")*))\"), a(\"BUILDIDENTIFIER\", \"[0-9A-Za-z-]+\"), a(\"BUILD\", \"(?:\\\\+(\" + o[i.BUILDIDENTIFIER] + \"(?:\\\\.\" + o[i.BUILDIDENTIFIER] + \")*))\"), a(\"FULLPLAIN\", \"v?\" + o[i.MAINVERSION] + o[i.PRERELEASE] + \"?\" + o[i.BUILD] + \"?\"), a(\"FULL\", \"^\" + o[i.FULLPLAIN] + \"$\"), a(\"LOOSEPLAIN\", \"[v=\\\\s]*\" + o[i.MAINVERSIONLOOSE] + o[i.PRERELEASELOOSE] + \"?\" + o[i.BUILD] + \"?\"), a(\"LOOSE\", \"^\" + o[i.LOOSEPLAIN] + \"$\"), a(\"GTLT\", \"((?:<|>)?=?)\"), a(\"XRANGEIDENTIFIERLOOSE\", o[i.NUMERICIDENTIFIERLOOSE] + \"|x|X|\\\\*\"), a(\"XRANGEIDENTIFIER\", o[i.NUMERICIDENTIFIER] + \"|x|X|\\\\*\"), a(\"XRANGEPLAIN\", \"[v=\\\\s]*(\" + o[i.XRANGEIDENTIFIER] + \")(?:\\\\.(\" + o[i.XRANGEIDENTIFIER] + \")(?:\\\\.(\" + o[i.XRANGEIDENTIFIER] + \")(?:\" + o[i.PRERELEASE] + \")?\" + o[i.BUILD] + \"?)?)?\"), a(\"XRANGEPLAINLOOSE\", \"[v=\\\\s]*(\" + o[i.XRANGEIDENTIFIERLOOSE] + \")(?:\\\\.(\" + o[i.XRANGEIDENTIFIERLOOSE] + \")(?:\\\\.(\" + o[i.XRANGEIDENTIFIERLOOSE] + \")(?:\" + o[i.PRERELEASELOOSE] + \")?\" + o[i.BUILD] + \"?)?)?\"), a(\"XRANGE\", \"^\" + o[i.GTLT] + \"\\\\s*\" + o[i.XRANGEPLAIN] + \"$\"), a(\"XRANGELOOSE\", \"^\" + o[i.GTLT] + \"\\\\s*\" + o[i.XRANGEPLAINLOOSE] + \"$\"), a(\"COERCE\", \"(^|[^\\\\d])(\\\\d{1,\" + r + \"})(?:\\\\.(\\\\d{1,\" + r + \"}))?(?:\\\\.(\\\\d{1,\" + r + \"}))?(?:$|[^\\\\d])\"), a(\"COERCERTL\", o[i.COERCE], !0), a(\"LONETILDE\", \"(?:~>?)\"), a(\"TILDETRIM\", \"(\\\\s*)\" + o[i.LONETILDE] + \"\\\\s+\", !0), t.tildeTrimReplace = \"$1~\", a(\"TILDE\", \"^\" + o[i.LONETILDE] + o[i.XRANGEPLAIN] + \"$\"), a(\"TILDELOOSE\", \"^\" + o[i.LONETILDE] + o[i.XRANGEPLAINLOOSE] + \"$\"), a(\"LONECARET\", \"(?:\\\\^)\"), a(\"CARETTRIM\", \"(\\\\s*)\" + o[i.LONECARET] + \"\\\\s+\", !0), t.caretTrimReplace = \"$1^\", a(\"CARET\", \"^\" + o[i.LONECARET] + o[i.XRANGEPLAIN] + \"$\"), a(\"CARETLOOSE\", \"^\" + o[i.LONECARET] + o[i.XRANGEPLAINLOOSE] + \"$\"), a(\"COMPARATORLOOSE\", \"^\" + o[i.GTLT] + \"\\\\s*(\" + o[i.LOOSEPLAIN] + \")$|^$\"), a(\"COMPARATOR\", \"^\" + o[i.GTLT] + \"\\\\s*(\" + o[i.FULLPLAIN] + \")$|^$\"), a(\"COMPARATORTRIM\", \"(\\\\s*)\" + o[i.GTLT] + \"\\\\s*(\" + o[i.LOOSEPLAIN] + \"|\" + o[i.XRANGEPLAIN] + \")\", !0), t.comparatorTrimReplace = \"$1$2$3\", a(\"HYPHENRANGE\", \"^\\\\s*(\" + o[i.XRANGEPLAIN] + \")\\\\s+-\\\\s+(\" + o[i.XRANGEPLAIN] + \")\\\\s*$\"), a(\"HYPHENRANGELOOSE\", \"^\\\\s*(\" + o[i.XRANGEPLAINLOOSE] + \")\\\\s+-\\\\s+(\" + o[i.XRANGEPLAINLOOSE] + \")\\\\s*$\"), a(\"STAR\", \"(<|>)?=?\\\\s*\\\\*\"), a(\"GTE0\", \"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"), a(\"GTE0PRE\", \"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\");\n}(m = {\n  exports: {}\n}, m.exports), m.exports),\n    w = /^[0-9]+$/,\n    R = y.MAX_LENGTH,\n    O = y.MAX_SAFE_INTEGER,\n    _ = I.re,\n    L = I.t,\n    N = function (e, t) {\n  var r = w.test(e),\n      n = w.test(t);\n  return r && n && (e = +e, t = +t), e === t ? 0 : r && !n ? -1 : n && !r ? 1 : e < t ? -1 : 1;\n},\n    A = function () {\n  function e(t, r) {\n    if (r && \"object\" == typeof r || (r = {\n      loose: !!r,\n      includePrerelease: !1\n    }), t instanceof e) {\n      if (t.loose === !!r.loose && t.includePrerelease === !!r.includePrerelease) return t;\n      t = t.version;\n    } else if (\"string\" != typeof t) throw new TypeError(\"Invalid Version: \" + t);\n\n    if (t.length > R) throw new TypeError(\"version is longer than \" + R + \" characters\");\n    g(\"SemVer\", t, r), this.options = r, this.loose = !!r.loose, this.includePrerelease = !!r.includePrerelease;\n    var n = t.trim().match(r.loose ? _[L.LOOSE] : _[L.FULL]);\n    if (!n) throw new TypeError(\"Invalid Version: \" + t);\n    if (this.raw = t, this.major = +n[1], this.minor = +n[2], this.patch = +n[3], this.major > O || this.major < 0) throw new TypeError(\"Invalid major version\");\n    if (this.minor > O || this.minor < 0) throw new TypeError(\"Invalid minor version\");\n    if (this.patch > O || this.patch < 0) throw new TypeError(\"Invalid patch version\");\n    this.prerelease = n[4] ? n[4].split(\".\").map(function (e) {\n      if (/^[0-9]+$/.test(e)) {\n        var t = +e;\n        if (t >= 0 && t < O) return t;\n      }\n\n      return e;\n    }) : [], this.build = n[5] ? n[5].split(\".\") : [], this.format();\n  }\n\n  var t = e.prototype;\n  return t.format = function () {\n    return this.version = this.major + \".\" + this.minor + \".\" + this.patch, this.prerelease.length && (this.version += \"-\" + this.prerelease.join(\".\")), this.version;\n  }, t.toString = function () {\n    return this.version;\n  }, t.compare = function (t) {\n    if (g(\"SemVer.compare\", this.version, this.options, t), !(t instanceof e)) {\n      if (\"string\" == typeof t && t === this.version) return 0;\n      t = new e(t, this.options);\n    }\n\n    return t.version === this.version ? 0 : this.compareMain(t) || this.comparePre(t);\n  }, t.compareMain = function (t) {\n    return t instanceof e || (t = new e(t, this.options)), N(this.major, t.major) || N(this.minor, t.minor) || N(this.patch, t.patch);\n  }, t.comparePre = function (t) {\n    if (t instanceof e || (t = new e(t, this.options)), this.prerelease.length && !t.prerelease.length) return -1;\n    if (!this.prerelease.length && t.prerelease.length) return 1;\n    if (!this.prerelease.length && !t.prerelease.length) return 0;\n    var r = 0;\n\n    do {\n      var n = this.prerelease[r],\n          o = t.prerelease[r];\n      if (g(\"prerelease compare\", r, n, o), void 0 === n && void 0 === o) return 0;\n      if (void 0 === o) return 1;\n      if (void 0 === n) return -1;\n      if (n !== o) return N(n, o);\n    } while (++r);\n  }, t.compareBuild = function (t) {\n    t instanceof e || (t = new e(t, this.options));\n    var r = 0;\n\n    do {\n      var n = this.build[r],\n          o = t.build[r];\n      if (g(\"prerelease compare\", r, n, o), void 0 === n && void 0 === o) return 0;\n      if (void 0 === o) return 1;\n      if (void 0 === n) return -1;\n      if (n !== o) return N(n, o);\n    } while (++r);\n  }, t.inc = function (e, t) {\n    switch (e) {\n      case \"premajor\":\n        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc(\"pre\", t);\n        break;\n\n      case \"preminor\":\n        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc(\"pre\", t);\n        break;\n\n      case \"prepatch\":\n        this.prerelease.length = 0, this.inc(\"patch\", t), this.inc(\"pre\", t);\n        break;\n\n      case \"prerelease\":\n        0 === this.prerelease.length && this.inc(\"patch\", t), this.inc(\"pre\", t);\n        break;\n\n      case \"major\":\n        0 === this.minor && 0 === this.patch && 0 !== this.prerelease.length || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];\n        break;\n\n      case \"minor\":\n        0 === this.patch && 0 !== this.prerelease.length || this.minor++, this.patch = 0, this.prerelease = [];\n        break;\n\n      case \"patch\":\n        0 === this.prerelease.length && this.patch++, this.prerelease = [];\n        break;\n\n      case \"pre\":\n        if (0 === this.prerelease.length) this.prerelease = [0];else {\n          for (var r = this.prerelease.length; --r >= 0;) \"number\" == typeof this.prerelease[r] && (this.prerelease[r]++, r = -2);\n\n          -1 === r && this.prerelease.push(0);\n        }\n        t && (this.prerelease[0] === t ? isNaN(this.prerelease[1]) && (this.prerelease = [t, 0]) : this.prerelease = [t, 0]);\n        break;\n\n      default:\n        throw new Error(\"invalid increment argument: \" + e);\n    }\n\n    return this.format(), this.raw = this.version, this;\n  }, e;\n}(),\n    T = function (e, t, r) {\n  return new A(e, r).compare(new A(t, r));\n},\n    P = function (e, t, r, n) {\n  switch (t) {\n    case \"===\":\n      return \"object\" == typeof e && (e = e.version), \"object\" == typeof r && (r = r.version), e === r;\n\n    case \"!==\":\n      return \"object\" == typeof e && (e = e.version), \"object\" == typeof r && (r = r.version), e !== r;\n\n    case \"\":\n    case \"=\":\n    case \"==\":\n      return function (e, t, r) {\n        return 0 === T(e, t, r);\n      }(e, r, n);\n\n    case \"!=\":\n      return function (e, t, r) {\n        return 0 !== T(e, t, r);\n      }(e, r, n);\n\n    case \">\":\n      return function (e, t, r) {\n        return T(e, t, r) > 0;\n      }(e, r, n);\n\n    case \">=\":\n      return function (e, t, r) {\n        return T(e, t, r) >= 0;\n      }(e, r, n);\n\n    case \"<\":\n      return function (e, t, r) {\n        return T(e, t, r) < 0;\n      }(e, r, n);\n\n    case \"<=\":\n      return function (e, t, r) {\n        return T(e, t, r) <= 0;\n      }(e, r, n);\n\n    default:\n      throw new TypeError(\"Invalid operator: \" + t);\n  }\n},\n    S = Symbol(\"SemVer ANY\"),\n    b = function () {\n  function e(t, r) {\n    if (r && \"object\" == typeof r || (r = {\n      loose: !!r,\n      includePrerelease: !1\n    }), t instanceof e) {\n      if (t.loose === !!r.loose) return t;\n      t = t.value;\n    }\n\n    g(\"comparator\", t, r), this.options = r, this.loose = !!r.loose, this.parse(t), this.value = this.semver === S ? \"\" : this.operator + this.semver.version, g(\"comp\", this);\n  }\n\n  var t = e.prototype;\n  return t.parse = function (e) {\n    var t = e.match(this.options.loose ? M[j.COMPARATORLOOSE] : M[j.COMPARATOR]);\n    if (!t) throw new TypeError(\"Invalid comparator: \" + e);\n    this.operator = void 0 !== t[1] ? t[1] : \"\", \"=\" === this.operator && (this.operator = \"\"), this.semver = t[2] ? new A(t[2], this.options.loose) : S;\n  }, t.toString = function () {\n    return this.value;\n  }, t.test = function (e) {\n    if (g(\"Comparator.test\", e, this.options.loose), this.semver === S || e === S) return !0;\n    if (\"string\" == typeof e) try {\n      e = new A(e, this.options);\n    } catch (e) {\n      return !1;\n    }\n    return P(e, this.operator, this.semver, this.options);\n  }, t.intersects = function (t, r) {\n    if (!(t instanceof e)) throw new TypeError(\"a Comparator is required\");\n    if (r && \"object\" == typeof r || (r = {\n      loose: !!r,\n      includePrerelease: !1\n    }), \"\" === this.operator) return \"\" === this.value || new C(t.value, r).test(this.value);\n    if (\"\" === t.operator) return \"\" === t.value || new C(this.value, r).test(t.semver);\n    var n = !(\">=\" !== this.operator && \">\" !== this.operator || \">=\" !== t.operator && \">\" !== t.operator),\n        o = !(\"<=\" !== this.operator && \"<\" !== this.operator || \"<=\" !== t.operator && \"<\" !== t.operator),\n        i = this.semver.version === t.semver.version,\n        s = !(\">=\" !== this.operator && \"<=\" !== this.operator || \">=\" !== t.operator && \"<=\" !== t.operator),\n        a = P(this.semver, \"<\", t.semver, r) && (\">=\" === this.operator || \">\" === this.operator) && (\"<=\" === t.operator || \"<\" === t.operator),\n        c = P(this.semver, \">\", t.semver, r) && (\"<=\" === this.operator || \"<\" === this.operator) && (\">=\" === t.operator || \">\" === t.operator);\n    return n || o || i && s || a || c;\n  }, c(e, null, [{\n    key: \"ANY\",\n    get: function () {\n      return S;\n    }\n  }]), e;\n}(),\n    M = I.re,\n    j = I.t,\n    C = function () {\n  function e(t, r) {\n    var n = this;\n    if (r && \"object\" == typeof r || (r = {\n      loose: !!r,\n      includePrerelease: !1\n    }), t instanceof e) return t.loose === !!r.loose && t.includePrerelease === !!r.includePrerelease ? t : new e(t.raw, r);\n    if (t instanceof b) return this.raw = t.value, this.set = [[t]], this.format(), this;\n    if (this.options = r, this.loose = !!r.loose, this.includePrerelease = !!r.includePrerelease, this.raw = t, this.set = t.split(/\\s*\\|\\|\\s*/).map(function (e) {\n      return n.parseRange(e.trim());\n    }).filter(function (e) {\n      return e.length;\n    }), !this.set.length) throw new TypeError(\"Invalid SemVer Range: \" + t);\n    this.format();\n  }\n\n  var t = e.prototype;\n  return t.format = function () {\n    return this.range = this.set.map(function (e) {\n      return e.join(\" \").trim();\n    }).join(\"||\").trim(), this.range;\n  }, t.toString = function () {\n    return this.range;\n  }, t.parseRange = function (e) {\n    var t = this,\n        r = this.options.loose;\n    e = (e = e.trim()).replace(r ? x[k.HYPHENRANGELOOSE] : x[k.HYPHENRANGE], J(this.options.includePrerelease)), g(\"hyphen replace\", e), e = e.replace(x[k.COMPARATORTRIM], D), g(\"comparator trim\", e, x[k.COMPARATORTRIM]), e = (e = (e = e.replace(x[k.TILDETRIM], G)).replace(x[k.CARETTRIM], F)).split(/\\s+/).join(\" \");\n    var n = r ? x[k.COMPARATORLOOSE] : x[k.COMPARATOR];\n    return e.split(\" \").map(function (e) {\n      return X(e, t.options);\n    }).join(\" \").split(/\\s+/).map(function (e) {\n      return z(e, t.options);\n    }).filter(this.options.loose ? function (e) {\n      return !!e.match(n);\n    } : function () {\n      return !0;\n    }).map(function (e) {\n      return new b(e, t.options);\n    });\n  }, t.intersects = function (t, r) {\n    if (!(t instanceof e)) throw new TypeError(\"a Range is required\");\n    return this.set.some(function (e) {\n      return U(e, r) && t.set.some(function (t) {\n        return U(t, r) && e.every(function (e) {\n          return t.every(function (t) {\n            return e.intersects(t, r);\n          });\n        });\n      });\n    });\n  }, t.test = function (e) {\n    if (!e) return !1;\n    if (\"string\" == typeof e) try {\n      e = new A(e, this.options);\n    } catch (e) {\n      return !1;\n    }\n\n    for (var t = 0; t < this.set.length; t++) if (Q(this.set[t], e, this.options)) return !0;\n\n    return !1;\n  }, e;\n}(),\n    x = I.re,\n    k = I.t,\n    D = I.comparatorTrimReplace,\n    G = I.tildeTrimReplace,\n    F = I.caretTrimReplace,\n    U = function (e, t) {\n  for (var r = !0, n = e.slice(), o = n.pop(); r && n.length;) r = n.every(function (e) {\n    return o.intersects(e, t);\n  }), o = n.pop();\n\n  return r;\n},\n    X = function (e, t) {\n  return g(\"comp\", e, t), e = q(e, t), g(\"caret\", e), e = V(e, t), g(\"tildes\", e), e = W(e, t), g(\"xrange\", e), e = Y(e, t), g(\"stars\", e), e;\n},\n    H = function (e) {\n  return !e || \"x\" === e.toLowerCase() || \"*\" === e;\n},\n    V = function (e, t) {\n  return e.trim().split(/\\s+/).map(function (e) {\n    return $(e, t);\n  }).join(\" \");\n},\n    $ = function (e, t) {\n  return e.replace(t.loose ? x[k.TILDELOOSE] : x[k.TILDE], function (t, r, n, o, i) {\n    var s;\n    return g(\"tilde\", e, t, r, n, o, i), H(r) ? s = \"\" : H(n) ? s = \">=\" + r + \".0.0 <\" + (+r + 1) + \".0.0-0\" : H(o) ? s = \">=\" + r + \".\" + n + \".0 <\" + r + \".\" + (+n + 1) + \".0-0\" : i ? (g(\"replaceTilde pr\", i), s = \">=\" + r + \".\" + n + \".\" + o + \"-\" + i + \" <\" + r + \".\" + (+n + 1) + \".0-0\") : s = \">=\" + r + \".\" + n + \".\" + o + \" <\" + r + \".\" + (+n + 1) + \".0-0\", g(\"tilde return\", s), s;\n  });\n},\n    q = function (e, t) {\n  return e.trim().split(/\\s+/).map(function (e) {\n    return K(e, t);\n  }).join(\" \");\n},\n    K = function (e, t) {\n  g(\"caret\", e, t);\n  var r = t.includePrerelease ? \"-0\" : \"\";\n  return e.replace(t.loose ? x[k.CARETLOOSE] : x[k.CARET], function (t, n, o, i, s) {\n    var a;\n    return g(\"caret\", e, t, n, o, i, s), H(n) ? a = \"\" : H(o) ? a = \">=\" + n + \".0.0\" + r + \" <\" + (+n + 1) + \".0.0-0\" : H(i) ? a = \"0\" === n ? \">=\" + n + \".\" + o + \".0\" + r + \" <\" + n + \".\" + (+o + 1) + \".0-0\" : \">=\" + n + \".\" + o + \".0\" + r + \" <\" + (+n + 1) + \".0.0-0\" : s ? (g(\"replaceCaret pr\", s), a = \"0\" === n ? \"0\" === o ? \">=\" + n + \".\" + o + \".\" + i + \"-\" + s + \" <\" + n + \".\" + o + \".\" + (+i + 1) + \"-0\" : \">=\" + n + \".\" + o + \".\" + i + \"-\" + s + \" <\" + n + \".\" + (+o + 1) + \".0-0\" : \">=\" + n + \".\" + o + \".\" + i + \"-\" + s + \" <\" + (+n + 1) + \".0.0-0\") : (g(\"no pr\"), a = \"0\" === n ? \"0\" === o ? \">=\" + n + \".\" + o + \".\" + i + r + \" <\" + n + \".\" + o + \".\" + (+i + 1) + \"-0\" : \">=\" + n + \".\" + o + \".\" + i + r + \" <\" + n + \".\" + (+o + 1) + \".0-0\" : \">=\" + n + \".\" + o + \".\" + i + \" <\" + (+n + 1) + \".0.0-0\"), g(\"caret return\", a), a;\n  });\n},\n    W = function (e, t) {\n  return g(\"replaceXRanges\", e, t), e.split(/\\s+/).map(function (e) {\n    return B(e, t);\n  }).join(\" \");\n},\n    B = function (e, t) {\n  return (e = e.trim()).replace(t.loose ? x[k.XRANGELOOSE] : x[k.XRANGE], function (r, n, o, i, s, a) {\n    g(\"xRange\", e, r, n, o, i, s, a);\n    var c = H(o),\n        u = c || H(i),\n        l = u || H(s);\n    return \"=\" === n && l && (n = \"\"), a = t.includePrerelease ? \"-0\" : \"\", c ? r = \">\" === n || \"<\" === n ? \"<0.0.0-0\" : \"*\" : n && l ? (u && (i = 0), s = 0, \">\" === n ? (n = \">=\", u ? (o = +o + 1, i = 0, s = 0) : (i = +i + 1, s = 0)) : \"<=\" === n && (n = \"<\", u ? o = +o + 1 : i = +i + 1), \"<\" === n && (a = \"-0\"), r = n + o + \".\" + i + \".\" + s + a) : u ? r = \">=\" + o + \".0.0\" + a + \" <\" + (+o + 1) + \".0.0-0\" : l && (r = \">=\" + o + \".\" + i + \".0\" + a + \" <\" + o + \".\" + (+i + 1) + \".0-0\"), g(\"xRange return\", r), r;\n  });\n},\n    Y = function (e, t) {\n  return g(\"replaceStars\", e, t), e.trim().replace(x[k.STAR], \"\");\n},\n    z = function (e, t) {\n  return g(\"replaceGTE0\", e, t), e.trim().replace(x[t.includePrerelease ? k.GTE0PRE : k.GTE0], \"\");\n},\n    J = function (e) {\n  return function (t, r, n, o, i, s, a, c, u, l, h, f, p) {\n    return ((r = H(n) ? \"\" : H(o) ? \">=\" + n + \".0.0\" + (e ? \"-0\" : \"\") : H(i) ? \">=\" + n + \".\" + o + \".0\" + (e ? \"-0\" : \"\") : s ? \">=\" + r : \">=\" + r + (e ? \"-0\" : \"\")) + \" \" + (c = H(u) ? \"\" : H(l) ? \"<\" + (+u + 1) + \".0.0-0\" : H(h) ? \"<\" + u + \".\" + (+l + 1) + \".0-0\" : f ? \"<=\" + u + \".\" + l + \".\" + h + \"-\" + f : e ? \"<\" + u + \".\" + l + \".\" + (+h + 1) + \"-0\" : \"<=\" + c)).trim();\n  };\n},\n    Q = function (e, t, r) {\n  for (var n = 0; n < e.length; n++) if (!e[n].test(t)) return !1;\n\n  if (t.prerelease.length && !r.includePrerelease) {\n    for (var o = 0; o < e.length; o++) if (g(e[o].semver), e[o].semver !== b.ANY && e[o].semver.prerelease.length > 0) {\n      var i = e[o].semver;\n      if (i.major === t.major && i.minor === t.minor && i.patch === t.patch) return !0;\n    }\n\n    return !1;\n  }\n\n  return !0;\n},\n    Z = y.MAX_LENGTH,\n    ee = I.re,\n    te = I.t,\n    re = I.re,\n    ne = I.t;\n\nfunction oe(e) {\n  return String.fromCharCode(parseInt(e.slice(1), 16));\n}\n\nfunction ie(e) {\n  return \"%\" + (\"00\" + e.charCodeAt(0).toString(16)).slice(-2);\n}\n\nfunction se(e) {\n  return t = JSON.stringify(e), btoa(encodeURIComponent(t).replace(/%[0-9A-F]{2}/g, oe));\n  var t;\n}\n\nfunction ae(e) {\n  return JSON.parse(decodeURIComponent(Array.from(atob(e), ie).join(\"\")));\n}\n\nfunction ce(e) {\n  return void 0 === e;\n}\n\nfunction ue(e) {\n  return function (e) {\n    return null === e;\n  }(e) || ce(e);\n}\n\nfunction le(e) {\n  return !ue(e) && !(ce(e.jsonrpc) || ce(e.id) || ce(e.method) || ce(e.params));\n}\n\nfunction he(e) {\n  return !ue(e) && !(ce(e.jsonrpc) || ce(e.id) || ce(e.result) && ce(e.error));\n}\n\nfunction fe(t) {\n  return !ue(t) && \"string\" == typeof t && Object.values(e).includes(t);\n}\n\nfunction pe(e) {\n  return !ue(e) && \"number\" == typeof e && Object.values(t).includes(e);\n}\n\nfunction de(e) {\n  if (!e) return !0;\n\n  for (var t in e) if (Object.hasOwnProperty.call(e, t)) return !1;\n\n  return !0;\n}\n\nvar ve = {};\n\nfunction Ee(e, t) {\n  return Object.assign(ve, t), e;\n}\n\nvar me = {\n  \"magic-sdk\": \"magic-sdk\",\n  \"@magic-sdk/react-native\": \"magic-sdk-rn\"\n},\n    ye = function (e) {\n  function t(r, n) {\n    var o;\n    return (o = e.call(this, \"Magic SDK Error: [\" + r + \"] \" + n) || this).code = void 0, o.rawMessage = void 0, o.__proto__ = Error, o.code = r, o.rawMessage = n, Object.setPrototypeOf(E(o), t.prototype), o;\n  }\n\n  return l(t, e), t;\n}(v(Error)),\n    ge = function (e) {\n  function r(n) {\n    var o;\n    (o = e.call(this) || this).__proto__ = Error, o.code = void 0, o.rawMessage = void 0;\n    var i = Number(null == n ? void 0 : n.code);\n    return o.rawMessage = (null == n ? void 0 : n.message) || \"Internal error\", o.code = pe(i) ? i : t.InternalError, o.message = \"Magic RPC Error: [\" + o.code + \"] \" + o.rawMessage, Object.setPrototypeOf(E(o), r.prototype), o;\n  }\n\n  return l(r, e), r;\n}(v(Error)),\n    Ie = function () {\n  function e(e, t) {\n    this.code = void 0, this.rawMessage = void 0, this.message = void 0, this.code = e, this.rawMessage = t, this.message = \"Magic SDK Warning: [\" + e + \"] \" + t;\n  }\n\n  return e.prototype.log = function () {\n    console.warn(this.message);\n  }, e;\n}(),\n    we = function (e) {\n  function t(r, n, o, i) {\n    var s;\n    return (s = e.call(this, \"Magic Extension Error (\" + r.name + \"): [\" + n + \"] \" + o) || this).code = void 0, s.rawMessage = void 0, s.data = void 0, s.__proto__ = Error, s.code = n, s.rawMessage = o, s.data = i, Object.setPrototypeOf(E(s), t.prototype), s;\n  }\n\n  return l(t, e), t;\n}(v(Error)),\n    Re = function () {\n  function e(e, t, r) {\n    this.code = void 0, this.rawMessage = void 0, this.message = void 0, this.code = t, this.rawMessage = r, this.message = \"Magic Extension Warning (\" + e.name + \"): [\" + t + \"] \" + r;\n  }\n\n  return e.prototype.log = function () {\n    console.warn(this.message);\n  }, e;\n}();\n\nfunction Oe() {\n  return new ye(r.MissingApiKey, \"Please provide an API key that you acquired from the Magic developer dashboard.\");\n}\n\nfunction _e() {\n  return new ye(r.ModalNotReady, \"Modal is not ready.\");\n}\n\nfunction Le() {\n  return new ye(r.MalformedResponse, \"Response from the Magic iframe is malformed.\");\n}\n\nfunction Ne(e) {\n  return new ye(r.ExtensionNotInitialized, \"Extensions must be initialized with a Magic SDK instance before `Extension.\" + e + \"` can be accessed. Do not invoke `Extension.\" + e + \"` inside an extension constructor.\");\n}\n\nfunction Ae(e) {\n  var t = \"Some extensions are incompatible with `\" + ve.sdkName + \"@\" + ve.version + \"`:\";\n  return e.filter(function (e) {\n    return null != e.compat;\n  }).forEach(function (e) {\n    var r = e.compat[ve.sdkName];\n    \"string\" == typeof r ? t += \"\\n  - Extension `\" + e.name + \"` supports version(s) `\" + r + \"`\" : r || (t += \"\\n  - Extension `\" + e.name + \"` does not support \" + ve.platform + \" environments.\");\n  }), new ye(r.IncompatibleExtensions, t);\n}\n\nfunction Te(e) {\n  var t, n, o;\n  return new ye(r.InvalidArgument, \"Invalid \" + (o = (t = e.argument + 1) % 100, (1 == (n = t % 10) && 11 !== o ? t + \"st\" : 2 === n && 12 !== o ? t + \"nd\" : 3 === n && 13 !== o ? t + \"rd\" : t + \"th\") + \" argument given to `\") + e.procedure + \"`.\\n  Expected: `\" + e.expected + \"`\\n  Received: `\" + e.received + \"`\");\n}\n\nfunction Pe() {\n  return new Ie(n.DuplicateIframe, \"Duplicate iframes found.\");\n}\n\nfunction Se() {\n  return new Ie(n.SyncWeb3Method, \"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.\");\n}\n\nfunction be() {\n  return new Ie(n.ReactNativeEndpointConfiguration, \"CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The `endpoint` parameter SHOULD NOT be provided. The Magic `<iframe>` is automatically wrapped by a WebView pointed at `\" + ve.defaultEndpoint + \"`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.\");\n}\n\nfunction Me(e) {\n  var t = e.useInstead;\n  return new Ie(n.DeprecationNotice, \"`\" + e.method + \"` will be removed from `\" + ve.sdkName + \"` in version `\" + e.removalVersions[ve.sdkName] + \"`.\" + (t ? \" Use `\" + t + \"` instead.\" : \"\"));\n}\n\nvar je = _regeneratorRuntime.mark(Ce);\n\nfunction Ce() {\n  var e;\n  return _regeneratorRuntime.wrap(function (t) {\n    for (;;) switch (t.prev = t.next) {\n      case 0:\n        e = 0;\n\n      case 1:\n        if (!(e < Number.MAX_SAFE_INTEGER)) {\n          t.next = 7;\n          break;\n        }\n\n        return t.next = 5, ++e;\n\n      case 5:\n        t.next = 8;\n        break;\n\n      case 7:\n        e = 0;\n\n      case 8:\n        t.next = 1;\n        break;\n\n      case 10:\n      case \"end\":\n        return t.stop();\n    }\n  }, je);\n}\n\nvar xe = Ce();\n\nfunction ke() {\n  return xe.next().value;\n}\n\nvar De = Symbol(\"Payload pre-processed by Magic SDK\");\n\nfunction Ge(e) {\n  return Object.defineProperty(e, De, {\n    value: !0,\n    enumerable: !1\n  }), e;\n}\n\nfunction Fe(e) {\n  var t, r, n;\n  return function (e) {\n    return !!e[De];\n  }(e) || (e.jsonrpc = null != (t = e.jsonrpc) ? t : \"2.0\", e.id = ke(), e.method = null != (r = e.method) ? r : \"noop\", e.params = null != (n = e.params) ? n : [], Ge(e)), e;\n}\n\nfunction Ue(e, t) {\n  return void 0 === t && (t = []), Ge({\n    params: t,\n    method: e,\n    jsonrpc: \"2.0\",\n    id: ke()\n  });\n}\n\nvar Xe = function () {\n  function e(t) {\n    this._jsonrpc = void 0, this._id = void 0, this._result = void 0, this._error = void 0, t instanceof e ? (this._jsonrpc = t.payload.jsonrpc, this._id = t.payload.id, this._result = t.payload.result, this._error = t.payload.error) : he(t) ? (this._jsonrpc = t.jsonrpc, this._id = t.id, this._result = t.result, this._error = t.error) : (this._jsonrpc = t.jsonrpc, this._id = t.id, this._result = void 0, this._error = void 0);\n  }\n\n  var t = e.prototype;\n  return t.applyError = function (e) {\n    return this._error = e, this;\n  }, t.applyResult = function (e) {\n    return this._result = e, this;\n  }, c(e, [{\n    key: \"hasError\",\n    get: function () {\n      return null != this._error;\n    }\n  }, {\n    key: \"hasResult\",\n    get: function () {\n      return void 0 !== this._result;\n    }\n  }, {\n    key: \"payload\",\n    get: function () {\n      return {\n        jsonrpc: this._jsonrpc,\n        id: this._id,\n        result: this._result,\n        error: this._error\n      };\n    }\n  }]), e;\n}(),\n    He = function (e) {\n  function t() {\n    return e.apply(this, arguments) || this;\n  }\n\n  return l(t, e), t;\n}(s(function (e) {\n  var t = Object.prototype.hasOwnProperty,\n      r = \"~\";\n\n  function n() {}\n\n  function o(e, t, r) {\n    this.fn = e, this.context = t, this.once = r || !1;\n  }\n\n  function i(e, t, n, i, s) {\n    if (\"function\" != typeof n) throw new TypeError(\"The listener must be a function\");\n    var a = new o(n, i || e, s),\n        c = r ? r + t : t;\n    return e._events[c] ? e._events[c].fn ? e._events[c] = [e._events[c], a] : e._events[c].push(a) : (e._events[c] = a, e._eventsCount++), e;\n  }\n\n  function s(e, t) {\n    0 == --e._eventsCount ? e._events = new n() : delete e._events[t];\n  }\n\n  function a() {\n    this._events = new n(), this._eventsCount = 0;\n  }\n\n  Object.create && (n.prototype = Object.create(null), new n().__proto__ || (r = !1)), a.prototype.eventNames = function () {\n    var e,\n        n,\n        o = [];\n    if (0 === this._eventsCount) return o;\n\n    for (n in e = this._events) t.call(e, n) && o.push(r ? n.slice(1) : n);\n\n    return Object.getOwnPropertySymbols ? o.concat(Object.getOwnPropertySymbols(e)) : o;\n  }, a.prototype.listeners = function (e) {\n    var t = this._events[r ? r + e : e];\n    if (!t) return [];\n    if (t.fn) return [t.fn];\n\n    for (var n = 0, o = t.length, i = new Array(o); n < o; n++) i[n] = t[n].fn;\n\n    return i;\n  }, a.prototype.listenerCount = function (e) {\n    var t = this._events[r ? r + e : e];\n    return t ? t.fn ? 1 : t.length : 0;\n  }, a.prototype.emit = function (e, t, n, o, i, s) {\n    var a = r ? r + e : e;\n    if (!this._events[a]) return !1;\n    var c,\n        u,\n        l = this._events[a],\n        h = arguments.length;\n\n    if (l.fn) {\n      switch (l.once && this.removeListener(e, l.fn, void 0, !0), h) {\n        case 1:\n          return l.fn.call(l.context), !0;\n\n        case 2:\n          return l.fn.call(l.context, t), !0;\n\n        case 3:\n          return l.fn.call(l.context, t, n), !0;\n\n        case 4:\n          return l.fn.call(l.context, t, n, o), !0;\n\n        case 5:\n          return l.fn.call(l.context, t, n, o, i), !0;\n\n        case 6:\n          return l.fn.call(l.context, t, n, o, i, s), !0;\n      }\n\n      for (u = 1, c = new Array(h - 1); u < h; u++) c[u - 1] = arguments[u];\n\n      l.fn.apply(l.context, c);\n    } else {\n      var f,\n          p = l.length;\n\n      for (u = 0; u < p; u++) switch (l[u].once && this.removeListener(e, l[u].fn, void 0, !0), h) {\n        case 1:\n          l[u].fn.call(l[u].context);\n          break;\n\n        case 2:\n          l[u].fn.call(l[u].context, t);\n          break;\n\n        case 3:\n          l[u].fn.call(l[u].context, t, n);\n          break;\n\n        case 4:\n          l[u].fn.call(l[u].context, t, n, o);\n          break;\n\n        default:\n          if (!c) for (f = 1, c = new Array(h - 1); f < h; f++) c[f - 1] = arguments[f];\n          l[u].fn.apply(l[u].context, c);\n      }\n    }\n\n    return !0;\n  }, a.prototype.on = function (e, t, r) {\n    return i(this, e, t, r, !1);\n  }, a.prototype.once = function (e, t, r) {\n    return i(this, e, t, r, !0);\n  }, a.prototype.removeListener = function (e, t, n, o) {\n    var i = r ? r + e : e;\n    if (!this._events[i]) return this;\n    if (!t) return s(this, i), this;\n    var a = this._events[i];\n    if (a.fn) a.fn !== t || o && !a.once || n && a.context !== n || s(this, i);else {\n      for (var c = 0, u = [], l = a.length; c < l; c++) (a[c].fn !== t || o && !a[c].once || n && a[c].context !== n) && u.push(a[c]);\n\n      u.length ? this._events[i] = 1 === u.length ? u[0] : u : s(this, i);\n    }\n    return this;\n  }, a.prototype.removeAllListeners = function (e) {\n    var t;\n    return e ? this._events[t = r ? r + e : e] && s(this, t) : (this._events = new n(), this._eventsCount = 0), this;\n  }, a.prototype.off = a.prototype.removeListener, a.prototype.addListener = a.prototype.on, a.prefixed = r, a.EventEmitter = a, e.exports = a;\n}));\n\nfunction Ve() {\n  var e = new He();\n  return {\n    emitter: e,\n    createChainingEmitterMethod: function (t, r) {\n      return function () {\n        return e[t].apply(e, [].slice.call(arguments)), r;\n      };\n    },\n    createBoundEmitterMethod: function (t) {\n      return function () {\n        return e[t].apply(e, [].slice.call(arguments));\n      };\n    }\n  };\n}\n\nvar $e = Symbol(\"isPromiEvent\");\n\nfunction qe(e) {\n  return !!e[$e];\n}\n\nfunction Ke(e) {\n  var t = We(e),\n      r = Ve(),\n      n = r.createBoundEmitterMethod,\n      o = r.createChainingEmitterMethod,\n      i = Symbol(\"Promise.then\"),\n      s = Symbol(\"Promise.catch\"),\n      a = Symbol(\"Promise.finally\"),\n      c = function (e, t) {\n    return function () {\n      var r = t[e].apply(t, [].slice.call(arguments));\n      return u(r);\n    };\n  },\n      u = function (e) {\n    var t;\n    return Object.assign(e, ((t = {})[$e] = !0, t[i] = e[i] || e.then, t[s] = e[s] || e.catch, t[a] = e[a] || e.finally, t.then = c(i, e), t.catch = c(s, e), t.finally = c(a, e), t.on = o(\"on\", e), t.once = o(\"once\", e), t.addListener = o(\"addListener\", e), t.off = o(\"off\", e), t.removeListener = o(\"removeListener\", e), t.removeAllListeners = o(\"removeAllListeners\", e), t.emit = n(\"emit\"), t.eventNames = n(\"eventNames\"), t.listeners = n(\"listeners\"), t.listenerCount = n(\"listenerCount\"), t));\n  },\n      l = u(t.then(function (e) {\n    return l.emit(\"done\", e), l.emit(\"settled\"), e;\n  }, function (e) {\n    throw l.emit(\"error\", e), l.emit(\"settled\"), e;\n  }));\n\n  return l;\n}\n\nfunction We(e) {\n  return new Promise(function (t, r) {\n    var n = e(t, r);\n    Promise.resolve(n).catch(r);\n  });\n}\n\nvar Be,\n    Ye = function () {\n  function e(e) {\n    this.sdk = void 0, this.sdk = e;\n  }\n\n  return e.prototype.request = function (e) {\n    var t = this.overlay.post(o.MAGIC_HANDLE_REQUEST, Fe(e)),\n        r = Ke(function (e, r) {\n      t.then(function (t) {\n        if (n(), t.hasError) r(new ge(t.payload.error));else {\n          if (!t.hasResult) throw Le();\n          e(t.payload.result);\n        }\n      }).catch(function (e) {\n        n(), r(e);\n      });\n    }),\n        n = this.overlay.on(i.MAGIC_HANDLE_EVENT, function (t) {\n      var n,\n          o = t.data.response;\n\n      if (o.id === e.id && null != (n = o.result) && n.event) {\n        var i = o.result,\n            s = i.params;\n        r.emit.apply(r, [i.event].concat(void 0 === s ? [] : s));\n      }\n    });\n    return r;\n  }, c(e, [{\n    key: \"overlay\",\n    get: function () {\n      return this.sdk.overlay;\n    }\n  }]), e;\n}(),\n    ze = function (t) {\n  function r() {\n    return t.apply(this, arguments) || this;\n  }\n\n  l(r, t);\n  var n = r.prototype;\n  return n.loginWithMagicLink = function (t) {\n    var r = t.showUI,\n        n = Ue(this.sdk.testMode ? e.LoginWithMagicLinkTestMode : e.LoginWithMagicLink, [{\n      email: t.email,\n      showUI: void 0 === r || r,\n      redirectURI: t.redirectURI\n    }]);\n    return this.request(n);\n  }, n.loginWithSMS = function (t) {\n    var r = Ue(this.sdk.testMode ? e.LoginWithSmsTestMode : e.LoginWithSms, [{\n      phoneNumber: t.phoneNumber,\n      showUI: !0\n    }]);\n    return this.request(r);\n  }, n.loginWithCredential = function (t) {\n    var r = null != t ? t : \"\";\n\n    if (!t && \"web\" === ve.platform) {\n      r = window.location.search;\n      var n = window.location.origin + window.location.pathname;\n      window.history.replaceState(null, \"\", n);\n    }\n\n    var o = Ue(this.sdk.testMode ? e.LoginWithCredentialTestMode : e.LoginWithCredential, [r]);\n    return this.request(o);\n  }, r;\n}(Ye);\n\nfunction Je(e) {\n  return function () {\n    try {\n      var t = arguments,\n          r = function () {\n        return Promise.resolve(Be.ready()).then(function () {\n          var r;\n          return (r = Be)[e].apply(r, [].slice.call(t));\n        });\n      },\n          n = function () {\n        if (!Be) return Promise.resolve(ve.configureStorage()).then(function (e) {\n          Be = e;\n        });\n      }();\n\n      return Promise.resolve(n && n.then ? n.then(r) : r(n));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nvar Qe = Je(\"getItem\"),\n    Ze = Je(\"setItem\"),\n    et = Je(\"removeItem\"),\n    tt = Je(\"clear\"),\n    rt = Je(\"length\"),\n    nt = Je(\"key\"),\n    ot = Je(\"keys\"),\n    it = Je(\"iterate\"),\n    st = {\n  __proto__: null,\n  getItem: Qe,\n  setItem: Ze,\n  removeItem: et,\n  clear: tt,\n  length: rt,\n  key: nt,\n  keys: ot,\n  iterate: it\n};\n\nfunction at() {\n  var e = window.crypto.getRandomValues(new Uint8Array(16));\n  e[6] = 15 & e[6] | 64, e[8] = 191 & e[8] | 128;\n  var t = \"\";\n  return t += e[0].toString(16), t += e[1].toString(16), t += e[2].toString(16), t += e[3].toString(16), t += \"-\", t += e[4].toString(16), t += e[5].toString(16), t += \"-\", t += e[6].toString(16), t += e[7].toString(16), t += \"-\", t += e[8].toString(16), t += e[9].toString(16), t += \"-\", t += e[10].toString(16), t += e[11].toString(16), t += e[12].toString(16), t += e[13].toString(16), (t += e[14].toString(16)) + e[15].toString(16);\n}\n\nvar ct = function () {\n  try {\n    return Promise.resolve(function () {\n      try {\n        return t = (e = \"undefined\" != typeof window && !!window.crypto) && !!window.crypto.subtle, e && t ? Promise.resolve(Qe(lt)).then(function (e) {\n          function t() {\n            return Qe(lt);\n          }\n\n          var r = function () {\n            if (!e) return Promise.resolve(function () {\n              try {\n                var e = null,\n                    t = window.crypto.subtle;\n                return Promise.resolve(t.generateKey(ft, !0, [\"sign\"])).then(function (r) {\n                  return Promise.resolve(t.exportKey(\"jwk\", r.privateKey)).then(function (n) {\n                    return Promise.resolve(t.exportKey(\"jwk\", r.publicKey)).then(function (r) {\n                      return e = r, Promise.resolve(t.importKey(\"jwk\", n, pt, !1, [\"sign\"])).then(function (t) {\n                        return Promise.resolve(Ze(ut, t)).then(function () {\n                          return Promise.resolve(Ze(lt, e)).then(function () {});\n                        });\n                      });\n                    });\n                  });\n                });\n              } catch (e) {\n                return Promise.reject(e);\n              }\n            }()).then(function () {});\n          }();\n\n          return r && r.then ? r.then(t) : t();\n        }) : (console.info(\"webcrypto is not supported\"), Promise.resolve(void 0));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n\n      var e, t;\n    }()).then(function (e) {\n      if (e) {\n        var t = window.crypto.subtle;\n        return Promise.resolve(Qe(ut)).then(function (r) {\n          if (r && t) {\n            var n,\n                o = {\n              iat: Math.floor(new Date().getTime() / 1e3),\n              jti: at()\n            },\n                i = vt(JSON.stringify({\n              typ: \"dpop+jwt\",\n              alg: \"ES256\",\n              jwk: e\n            })),\n                s = vt(JSON.stringify(o)),\n                a = (n = i + \".\" + s, new TextEncoder().encode(n));\n            return Promise.resolve(t.sign({\n              name: ht,\n              hash: {\n                name: \"SHA-256\"\n              }\n            }, r, a)).then(function (e) {\n              var t,\n                  r,\n                  n = (t = new Uint8Array(e), r = \"\", t.forEach(function (e) {\n                r += String.fromCharCode(e);\n              }), Et(r));\n              return i + \".\" + s + \".\" + n;\n            });\n          }\n\n          console.info(\"unable to find private key or webcrypto unsupported\");\n        });\n      }\n\n      console.info(\"unable to create public key or webcrypto is unsupported\");\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    ut = \"STORE_KEY_PRIVATE_KEY\",\n    lt = \"STORE_KEY_PUBLIC_JWK\",\n    ht = \"ECDSA\",\n    ft = {\n  name: ht,\n  namedCurve: \"P-256\"\n},\n    pt = {\n  name: ht,\n  namedCurve: \"P-256\"\n};\n\nfunction dt() {\n  et(lt), et(ut);\n}\n\nfunction vt(e) {\n  return Et(function (e) {\n    return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g, function (e, t) {\n      return String.fromCharCode(parseInt(t, 16));\n    });\n  }(e));\n}\n\nfunction Et(e) {\n  return btoa(e).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+/g, \"\");\n}\n\nvar mt = function (t) {\n  function r() {\n    return t.apply(this, arguments) || this;\n  }\n\n  l(r, t);\n  var n = r.prototype;\n  return n.getIdToken = function (t) {\n    var r = Ue(this.sdk.testMode ? e.GetIdTokenTestMode : e.GetIdToken, [t]);\n    return this.request(r);\n  }, n.generateIdToken = function (t) {\n    var r = Ue(this.sdk.testMode ? e.GenerateIdTokenTestMode : e.GenerateIdToken, [t]);\n    return this.request(r);\n  }, n.getMetadata = function () {\n    var t = Ue(this.sdk.testMode ? e.GetMetadataTestMode : e.GetMetadata);\n    return this.request(t);\n  }, n.updateEmail = function (t) {\n    var r = t.showUI,\n        n = Ue(this.sdk.testMode ? e.UpdateEmailTestMode : e.UpdateEmail, [{\n      email: t.email,\n      showUI: void 0 === r || r\n    }]);\n    return this.request(n);\n  }, n.isLoggedIn = function () {\n    var t = Ue(this.sdk.testMode ? e.IsLoggedInTestMode : e.IsLoggedIn);\n    return this.request(t);\n  }, n.logout = function () {\n    dt();\n    var t = Ue(this.sdk.testMode ? e.LogoutTestMode : e.Logout);\n    return this.request(t);\n  }, n.showSettings = function () {\n    var t = Ue(this.sdk.testMode ? e.UserSettingsTestMode : e.UserSettings);\n    return this.request(t);\n  }, r;\n}(Ye),\n    yt = Ve(),\n    gt = yt.createBoundEmitterMethod,\n    It = yt.createChainingEmitterMethod,\n    wt = function (e) {\n  function t() {\n    for (var t, r = arguments.length, n = new Array(r), o = 0; o < r; o++) n[o] = arguments[o];\n\n    return (t = e.call.apply(e, [this].concat(n)) || this).isMagic = !0, t.on = It(\"on\", E(t)), t.once = It(\"once\", E(t)), t.addListener = It(\"addListener\", E(t)), t.off = It(\"off\", E(t)), t.removeListener = It(\"removeListener\", E(t)), t.removeAllListeners = It(\"removeAllListeners\", E(t)), t.emit = gt(\"emit\"), t.eventNames = gt(\"eventNames\"), t.listeners = gt(\"listeners\"), t.listenerCount = gt(\"listenerCount\"), t;\n  }\n\n  l(t, e);\n  var r = t.prototype;\n  return r.sendAsync = function (e, t) {\n    var r = this;\n    if (!t) throw Te({\n      procedure: \"Magic.rpcProvider.sendAsync\",\n      argument: 1,\n      expected: \"function\",\n      received: null === t ? \"null\" : typeof t\n    });\n    if (Array.isArray(e)) this.overlay.post(o.MAGIC_HANDLE_REQUEST, e.map(function (e) {\n      var t = Fe(e);\n      return r.prefixPayloadMethodForTestMode(t), t;\n    })).then(function (e) {\n      t(null, e.map(function (e) {\n        return u({}, e.payload, {\n          error: e.hasError ? new ge(e.payload.error) : null\n        });\n      }));\n    });else {\n      var n = Fe(e);\n      this.prefixPayloadMethodForTestMode(n), this.overlay.post(o.MAGIC_HANDLE_REQUEST, n).then(function (e) {\n        t(e.hasError ? new ge(e.payload.error) : null, e.payload);\n      });\n    }\n  }, r.send = function (e, t) {\n    if (\"string\" == typeof e) {\n      var r = Ue(e, Array.isArray(t) ? t : []);\n      return this.request(r);\n    }\n\n    if (!Array.isArray(e) && !t) {\n      var n = Se();\n      return n.log(), new Xe(e).applyError({\n        code: -32603,\n        message: n.rawMessage\n      }).payload;\n    }\n\n    this.sendAsync(e, t);\n  }, r.enable = function () {\n    var e = Ue(\"eth_accounts\");\n    return this.request(e);\n  }, r.request = function (t) {\n    return this.prefixPayloadMethodForTestMode(t), e.prototype.request.call(this, t);\n  }, r.prefixPayloadMethodForTestMode = function (e) {\n    this.sdk.testMode && (e.method = \"testMode/eth/\" + e.method);\n  }, t;\n}(Ye);\n\nfunction Rt(e, t) {\n  return t ? new URL(e, t) : new URL(e);\n}\n\nvar Ot = [\"request\", \"overlay\", \"sdk\"],\n    _t = function (e) {\n  function t() {\n    var t;\n    (t = e.call(this, void 0) || this).__sdk_access_field_descriptors__ = new Map(), t.__is_initialized__ = !1, t.utils = {\n      createPromiEvent: Ke,\n      isPromiEvent: qe,\n      encodeJSON: se,\n      decodeJSON: ae,\n      createJsonRpcRequestPayload: Ue,\n      standardizeJsonRpcRequestPayload: Fe,\n      storage: st\n    };\n    var r = [E(t)].concat(function (e) {\n      for (var t = Object.getPrototypeOf(e), r = [t]; t !== Ye.prototype;) t = Object.getPrototypeOf(t), r.push(t);\n\n      return r;\n    }(E(t)));\n    return Ot.forEach(function (e) {\n      var n = r.map(function (t) {\n        return Object.getOwnPropertyDescriptor(t, e);\n      }),\n          o = n.findIndex(function (e) {\n        return !!e;\n      }),\n          i = n[o];\n      i && (t.__sdk_access_field_descriptors__.set(e, {\n        descriptor: i,\n        isPrototypeField: o > 0\n      }), Object.defineProperty(E(t), e, {\n        configurable: !0,\n        get: function () {\n          throw Ne(e);\n        }\n      }));\n    }), t;\n  }\n\n  l(t, e);\n  var r = t.prototype;\n  return r.init = function (e) {\n    var t = this;\n    this.__is_initialized__ || (Ot.forEach(function (e) {\n      if (t.__sdk_access_field_descriptors__.has(e)) {\n        var r = t.__sdk_access_field_descriptors__.get(e),\n            n = r.descriptor;\n\n        r.isPrototypeField ? delete t[e] : Object.defineProperty(t, e, n);\n      }\n    }), this.sdk = e, this.__is_initialized__ = !0);\n  }, r.createDeprecationWarning = function (e) {\n    var t = e.useInstead;\n    return new Re(this, \"DEPRECATION_NOTICE\", \"`\" + e.method + \"` will be removed from this Extension in version `\" + e.removalVersion + \"`.\" + (t ? \" Use `\" + t + \"` instead.\" : \"\"));\n  }, r.createWarning = function (e, t) {\n    return new Re(this, e, t);\n  }, r.createError = function (e, t, r) {\n    return new we(this, e, t, r);\n  }, t;\n}(Ye),\n    Lt = function (e) {\n  function t() {\n    return e.apply(this, arguments) || this;\n  }\n\n  return l(t, e), t;\n}(_t),\n    Nt = function (e) {\n  function t() {\n    return e.apply(this, arguments) || this;\n  }\n\n  return l(t, e), t;\n}(_t);\n\nfunction At(e) {\n  return !e.compat || null == e.compat[ve.sdkName] || (\"string\" == typeof e.compat[ve.sdkName] ? function (e, t, r) {\n    try {\n      t = new C(t, void 0);\n    } catch (e) {\n      return !1;\n    }\n\n    return t.test(e);\n  }(function (e, t) {\n    if (e instanceof A) return e;\n    if (\"number\" == typeof e && (e = String(e)), \"string\" != typeof e) return null;\n    var r = null;\n\n    if ((t = t || {}).rtl) {\n      for (var n; (n = re[ne.COERCERTL].exec(e)) && (!r || r.index + r[0].length !== e.length);) r && n.index + n[0].length === r.index + r[0].length || (r = n), re[ne.COERCERTL].lastIndex = n.index + n[1].length + n[2].length;\n\n      re[ne.COERCERTL].lastIndex = -1;\n    } else r = e.match(re[ne.COERCE]);\n\n    return null === r ? null : function (e, t) {\n      if (t && \"object\" == typeof t || (t = {\n        loose: !!t,\n        includePrerelease: !1\n      }), e instanceof A) return e;\n      if (\"string\" != typeof e) return null;\n      if (e.length > Z) return null;\n      if (!(t.loose ? ee[te.LOOSE] : ee[te.FULL]).test(e)) return null;\n\n      try {\n        return new A(e, t);\n      } catch (e) {\n        return null;\n      }\n    }(r[2] + \".\" + (r[3] || \"0\") + \".\" + (r[4] || \"0\"), t);\n  }(ve.version), e.compat[ve.sdkName]) : !!e.compat[ve.sdkName]);\n}\n\nfunction Tt(e) {\n  var t,\n      r = this,\n      n = null != (t = null == e ? void 0 : e.extensions) ? t : [],\n      o = {},\n      i = [];\n  if (Array.isArray(n) ? n.forEach(function (e) {\n    At(e) ? (e.init(r), (e.name || e.name !== Nt.Anonymous) && (r[e.name] = e), e instanceof Nt.Internal && (de(e.config) || (o[e.name] = e.config))) : i.push(e);\n  }) : Object.keys(n).forEach(function (e) {\n    if (At(n[e])) {\n      n[e].init(r);\n      var t = n[e];\n      r[e] = t, t instanceof Nt.Internal && (de(t.config) || (o[n[e].name] = t.config));\n    } else i.push(n[e]);\n  }), i.length) throw Ae(i);\n  return o;\n}\n\nNt.Internal = Lt, Nt.Anonymous = \"anonymous extension\";\n\nvar Pt = function () {\n  function e(e, t) {\n    var r;\n    if (this.apiKey = void 0, this.endpoint = void 0, this.parameters = void 0, this.testMode = void 0, this.auth = void 0, this.user = void 0, this.rpcProvider = void 0, this.apiKey = e, !e) throw Oe();\n    \"react-native\" === ve.platform && null != t && t.endpoint && be().log();\n    var n = ve.defaultEndpoint,\n        o = ve.version;\n    this.testMode = !(null == t || !t.testMode), this.endpoint = Rt(null != (r = null == t ? void 0 : t.endpoint) ? r : n).origin, this.auth = new ze(this), this.user = new mt(this), this.rpcProvider = new wt(this);\n    var i = Tt.call(this, t);\n    this.parameters = se({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : \"\",\n      ETH_NETWORK: null == t ? void 0 : t.network,\n      host: Rt(this.endpoint).host,\n      sdk: me[ve.sdkName],\n      version: o,\n      ext: de(i) ? void 0 : i,\n      locale: (null == t ? void 0 : t.locale) || \"en_US\"\n    });\n  }\n\n  return e.prototype.preload = function () {\n    try {\n      return Promise.resolve(this.overlay.ready).then(function () {});\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, c(e, [{\n    key: \"overlay\",\n    get: function () {\n      if (!e.__overlays__.has(this.parameters)) {\n        var t = new ve.ViewController(this.endpoint, this.parameters);\n        t.init(), e.__overlays__.set(this.parameters, t);\n      }\n\n      return e.__overlays__.get(this.parameters);\n    }\n  }]), e;\n}();\n\nPt.__overlays__ = new Map();\n\nvar St = function () {\n  function e(e, t) {\n    this.endpoint = void 0, this.parameters = void 0, this.ready = void 0, this.messageHandlers = new Set(), this.endpoint = e, this.parameters = t, this.ready = this.waitForReady(), this.listen();\n  }\n\n  var t = e.prototype;\n  return t.post = function (e, t) {\n    try {\n      var r = this;\n      return Promise.resolve(We(function (n) {\n        try {\n          return Promise.resolve(r.ready).then(function () {\n            var o = [],\n                s = Array.isArray(t) ? t.map(function (e) {\n              return e.id;\n            }) : [];\n            return Promise.resolve(function (e, t) {\n              try {\n                return Promise.resolve(Qe(\"rt\")).then(function (r) {\n                  function n() {\n                    return o ? r ? {\n                      msgType: e,\n                      payload: t,\n                      jwt: o,\n                      rt: r\n                    } : {\n                      msgType: e,\n                      payload: t,\n                      jwt: o\n                    } : {\n                      msgType: e,\n                      payload: t\n                    };\n                  }\n\n                  var o,\n                      i = function () {\n                    if (\"web\" === ve.platform) {\n                      var e = function (e, t) {\n                        try {\n                          var r = Promise.resolve(ct()).then(function (e) {\n                            o = e;\n                          });\n                        } catch (e) {\n                          return t(e);\n                        }\n\n                        return r && r.then ? r.then(void 0, t) : r;\n                      }(0, function (e) {\n                        console.error(\"webcrypto error\", e);\n                      });\n\n                      if (e && e.then) return e.then(function () {});\n                    }\n                  }();\n\n                  return i && i.then ? i.then(n) : n();\n                });\n              } catch (e) {\n                return Promise.reject(e);\n              }\n            }(e + \"-\" + r.parameters, t)).then(function (e) {\n              return Promise.resolve(r._post(e)).then(function () {\n                var e,\n                    a = r.on(i.MAGIC_HANDLE_RESPONSE, (e = function () {\n                  return a();\n                }, function (r) {\n                  var i = function (e, t) {\n                    var r,\n                        n = null == (r = t.data.response) ? void 0 : r.id,\n                        o = function (e, t) {\n                      return t && Array.isArray(e) ? e.find(function (e) {\n                        return e.id === t;\n                      }) : e;\n                    }(e, n);\n\n                    return n && o ? {\n                      id: n,\n                      response: new Xe(o).applyResult(t.data.response.result).applyError(t.data.response.error)\n                    } : {};\n                  }(t, r),\n                      a = i.id,\n                      c = i.response;\n\n                  !function (e) {\n                    try {\n                      e.data.rt ? Promise.resolve(Ze(\"rt\", e.data.rt)).then(function () {}) : Promise.resolve();\n                    } catch (e) {\n                      return Promise.reject(e);\n                    }\n                  }(r), a && c && Array.isArray(t) && s.includes(a) ? (o.push(c), o.length === t.length && (e(), n(o))) : a && c && !Array.isArray(t) && a === t.id && (e(), n(c));\n                }));\n              });\n            });\n          });\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  }, t.on = function (e, t) {\n    var r = this,\n        n = t.bind(window),\n        o = function (t) {\n      t.data.msgType === e + \"-\" + r.parameters && n(t);\n    };\n\n    return this.messageHandlers.add(o), function () {\n      return r.messageHandlers.delete(o);\n    };\n  }, t.waitForReady = function () {\n    var e = this;\n    return new Promise(function (t) {\n      e.on(i.MAGIC_OVERLAY_READY, function () {\n        return t();\n      });\n    });\n  }, t.listen = function () {\n    var e = this;\n    this.on(i.MAGIC_HIDE_OVERLAY, function () {\n      e.hideOverlay();\n    }), this.on(i.MAGIC_SHOW_OVERLAY, function () {\n      e.showOverlay();\n    });\n  }, e;\n}();\n\nexport { Nt as Extension, we as MagicExtensionError, Re as MagicExtensionWarning, ge as MagicRPCError, ye as MagicSDKError, Ie as MagicSDKWarning, Pt as SDKBase, ut as STORE_KEY_PRIVATE_KEY, lt as STORE_KEY_PUBLIC_JWK, He as TypedEmitter, St as ViewController, dt as clearKeys, Me as createDeprecationWarning, Pe as createDuplicateIframeWarning, Ne as createExtensionNotInitializedError, Ae as createIncompatibleExtensionsError, Te as createInvalidArgumentError, ct as createJwt, Le as createMalformedResponseError, Oe as createMissingApiKeyError, _e as createModalNotReadyError, Ke as createPromiEvent, We as createPromise, be as createReactNativeEndpointConfigurationWarning, Ee as createSDK, Se as createSynchronousWeb3MethodWarning, Ve as createTypedEmitter, Rt as createURL, ae as decodeJSON, se as encodeJSON, ke as getPayloadId, de as isEmpty, pe as isJsonRpcErrorCode, le as isJsonRpcRequestPayload, he as isJsonRpcResponsePayload, fe as isMagicPayloadMethod, qe as isPromiEvent, st as storage, at as uuid };","map":{"version":3,"mappings":"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","names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","this","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","SEMVER_SPEC_VERSION","r","constants","MAX_LENGTH","MAX_SAFE_INTEGER","Number","MAX_SAFE_COMPONENT_LENGTH","debug_1","process","env","NODE_DEBUG","test","console","concat","re_1","e","t","s","re","src","o","a","n","RegExp","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCE","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","numeric","MAX_LENGTH$1","re$4","t$4","compareIdentifiers","SemVer","loose","includePrerelease","version","options","trim","match","LOOSE","FULL","raw","major","minor","patch","prerelease","split","map","build","format","join","toString","compare","compareMain","comparePre","compareBuild","inc","compare_1","cmp_1","eq_1","neq_1","gt_1","gte_1","lt_1","lte_1","ANY","Comparator","parse","semver","operator","re$3","t$3","COMPARATORLOOSE","COMPARATOR","intersects","Range","set","_this","parseRange","filter","range","replace","re$2","t$2","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","TILDETRIM","CARETTRIM","parseComparator","_this2","replaceGTE0","some","isSatisfiable","every","testSet","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","toLowerCase","replaceTilde","TILDELOOSE","TILDE","replaceCaret","CARETLOOSE","CARET","replaceXRange","XRANGELOOSE","XRANGE","E","p","l","STAR","GTE0PRE","GTE0","c","$","h","re$1","t$1","percentToByte","String","fromCharCode","parseInt","byteToPercent","b","charCodeAt","encodeJSON","str","JSON","stringify","btoa","encodeURIComponent","decodeJSON","queryString","decodeURIComponent","Array","from","atob","isUndefined","isNil","isNull","isJsonRpcRequestPayload","jsonrpc","id","params","isJsonRpcResponsePayload","isMagicPayloadMethod","MagicPayloadMethod","includes","isJsonRpcErrorCode","RPCErrorCode","isEmpty","SDKEnvironment","createSDK","SDKBaseCtor","environment","assign","sdkNameToEnvName","MagicSDKError","code","rawMessage","v","MagicRPCError","sourceError","codeNormalized","message","InternalError","MagicSDKWarning","log","warn","MagicExtensionError","ext","data","_this3","MagicExtensionWarning","createMissingApiKeyError","SDKErrorCode","MissingApiKey","createModalNotReadyError","ModalNotReady","createMalformedResponseError","MalformedResponse","createExtensionNotInitializedError","member","ExtensionNotInitialized","createIncompatibleExtensionsError","extensions","msg","sdkName","compat","platform","IncompatibleExtensions","createInvalidArgumentError","iAdjusted","j","k","InvalidArgument","argument","procedure","expected","received","createDuplicateIframeWarning","SDKWarningCode","DuplicateIframe","createSynchronousWeb3MethodWarning","SyncWeb3Method","createReactNativeEndpointConfigurationWarning","ReactNativeEndpointConfiguration","defaultEndpoint","createDeprecationWarning","useInstead","DeprecationNotice","removalVersions","createIntGenerator","index","je","intGenerator","getPayloadId","payloadPreprocessedSymbol","markPayloadAsPreprocessed","payload","standardizeJsonRpcRequestPayload","isPayloadPreprocessed","createJsonRpcRequestPayload","JsonRpcResponse","responseOrPayload","_jsonrpc","_id","_result","_error","applyError","applyResult","TypedEmitter","has","prefix","Events","EE","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","on","removeAllListeners","off","prefixed","createTypedEmitter","createChainingEmitterMethod","source","createBoundEmitterMethod","promiEventBrand","isPromiEvent","createPromiEvent","executor","promise","createPromise","thenSymbol","catchSymbol","finallySymbol","createChainingPromiseMethod","nextPromise","promiEvent","resolved","lf","BaseModule","sdk","request","responsePromise","overlay","post","MagicOutgoingWindowMessage","MAGIC_HANDLE_REQUEST","res","cleanupEvents","hasError","hasResult","MagicIncomingWindowMessage","MAGIC_HANDLE_EVENT","response","_response$result","AuthModule","loginWithMagicLink","configuration","showUI","requestPayload","testMode","LoginWithMagicLinkTestMode","LoginWithMagicLink","email","redirectURI","loginWithSMS","LoginWithSmsTestMode","LoginWithSms","phoneNumber","loginWithCredential","credentialOrQueryString","credentialResolved","window","location","search","urlWithoutQuery","origin","pathname","history","replaceState","LoginWithCredentialTestMode","LoginWithCredential","proxyLocalForageMethod","ready","configureStorage","getItem","setItem","removeItem","clear","iterate","st","uuid","u","crypto","getRandomValues","Uint8Array","uid","createJwt","hasSubtleCrypto","hasCrypto","subtle","STORE_KEY_PUBLIC_JWK","jwkPublicKey","generateKey","EC_GEN_PARAMS","kp","exportKey","privateKey","jwkPrivateKey","publicKey","importKey","EC_IMPORT_PARAMS","nonExportPrivateKey","STORE_KEY_PRIVATE_KEY","generateWCKP","getPublicKey","publicJwk","privateJwk","claims","iat","Math","floor","Date","getTime","jti","jws","strToUrlBase64","typ","alg","jwk","TextEncoder","encode","sign","ALGO_NAME","hash","uint8","bin","sig","binToUrlBase64","namedCurve","clearKeys","_","p1","utf8ToBinaryString","UserModule","getIdToken","GetIdTokenTestMode","GetIdToken","generateIdToken","GenerateIdTokenTestMode","GenerateIdToken","getMetadata","GetMetadataTestMode","GetMetadata","updateEmail","UpdateEmailTestMode","UpdateEmail","isLoggedIn","IsLoggedInTestMode","IsLoggedIn","logout","LogoutTestMode","Logout","showSettings","UserSettingsTestMode","UserSettings","RPCProviderModule","isMagic","sendAsync","onRequestComplete","isArray","standardizedPayload","prefixPayloadMethodForTestMode","batchResponse","finalPayload","send","payloadOrMethod","onRequestCompleteOrParams","warning","enable","createURL","url","base","URL","sdkAccessFields","BaseExtension","__sdk_access_field_descriptors__","Map","__is_initialized__","utils","storage","allSources","instance","currentProto","protos","getPrototypeChain","prop","allDescriptors","getOwnPropertyDescriptor","sourceIndex","findIndex","x","descriptor","isPrototypeField","get","init","removalVersion","createWarning","createError","InternalExtension","Extension","checkExtensionCompat","satisfies","rtl","COERCERTL","exec","lastIndex","parse_1","coerce","prepareExtensions","extConfig","incompatibleExtensions","Anonymous","Internal","config","SDKBase","apiKey","endpoint","parameters","auth","user","rpcProvider","API_KEY","DOMAIN_ORIGIN","ETH_NETWORK","network","host","locale","preload","__overlays__","controller","ViewController","messageHandlers","Set","waitForReady","listen","msgType","batchData","batchIds","rt","jwt","createMagicRequest","_post","removeEventListener","removeResponseListener","MAGIC_HANDLE_RESPONSE","_event$data$response","requestPayloadResolved","find","getRequestPayloadFromBatch","standardizeResponse","persistMagicEventRefreshToken","handler","boundHandler","bind","add","_this4","MAGIC_OVERLAY_READY","MAGIC_HIDE_OVERLAY","_this5","hideOverlay","MAGIC_SHOW_OVERLAY","showOverlay"],"sources":["../../../../../node_modules/regenerator-runtime/runtime.js","../../src/util/semver.js","../../src/util/base64-json.ts","../../src/util/type-guards.ts","../../src/core/sdk-environment.ts","../../src/core/sdk-exceptions.ts","../../src/util/get-payload-id.ts","../../src/core/json-rpc.ts","../../src/util/events.ts","../../node_modules/eventemitter3/index.js","../../src/util/promise-tools.ts","../../src/util/storage.ts","../../src/modules/base-module.ts","../../src/modules/auth.ts","../../src/util/uuid.ts","../../src/util/web-crypto.ts","../../src/modules/user.ts","../../src/modules/rpc-provider.ts","../../src/util/url.ts","../../src/modules/base-extension.ts","../../src/core/sdk.ts","../../src/core/view-controller.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/* eslint-disable */\n/* istanbul ignore file */\n\n// DO NOT CHANGE THIS FILE.\n//\n// We have to bundle `semver` ourselves due to a long-standing cyclic dependency\n// which causes Rollup to break the `satisfies` function.\n//\n// See:\n//   - https://github.com/magiclabs/magic-js/issues/198\n//   - https://github.com/rollup/plugins/issues/879\n//   - https://github.com/npm/node-semver/issues/318\n//   - https://github.com/npm/node-semver/issues/381\n\nfunction createCommonjsModule(e){const r={exports:{}};return e(r,r.exports),r.exports}const SEMVER_SPEC_VERSION=\"2.0.0\",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16,constants={SEMVER_SPEC_VERSION:\"2.0.0\",MAX_LENGTH:256,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH:16},debug=\"object\"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error(\"SEMVER\",...e):()=>{},debug_1=debug,re_1=createCommonjsModule(function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t}=constants,s=(r=e.exports={}).re=[],i=r.src=[],o=r.t={};let a=0;const n=(e,r,t)=>{const n=a++;debug_1(n,r),o[e]=n,i[n]=r,s[n]=new RegExp(r,t?\"g\":void 0)};n(\"NUMERICIDENTIFIER\",\"0|[1-9]\\\\d*\"),n(\"NUMERICIDENTIFIERLOOSE\",\"[0-9]+\"),n(\"NONNUMERICIDENTIFIER\",\"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"),n(\"MAINVERSION\",`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})`),n(\"MAINVERSIONLOOSE\",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})`),n(\"PRERELEASEIDENTIFIER\",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASEIDENTIFIERLOOSE\",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASE\",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\\\.${i[o.PRERELEASEIDENTIFIER]})*))`),n(\"PRERELEASELOOSE\",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),n(\"BUILDIDENTIFIER\",\"[0-9A-Za-z-]+\"),n(\"BUILD\",`(?:\\\\+(${i[o.BUILDIDENTIFIER]}(?:\\\\.${i[o.BUILDIDENTIFIER]})*))`),n(\"FULLPLAIN\",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),n(\"FULL\",`^${i[o.FULLPLAIN]}$`),n(\"LOOSEPLAIN\",`[v=\\\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),n(\"LOOSE\",`^${i[o.LOOSEPLAIN]}$`),n(\"GTLT\",\"((?:<|>)?=?)\"),n(\"XRANGEIDENTIFIERLOOSE\",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`),n(\"XRANGEIDENTIFIER\",`${i[o.NUMERICIDENTIFIER]}|x|X|\\\\*`),n(\"XRANGEPLAIN\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGEPLAINLOOSE\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAIN]}$`),n(\"XRANGELOOSE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAINLOOSE]}$`),n(\"COERCE\",`(^|[^\\\\d])(\\\\d{1,${t}})`+`(?:\\\\.(\\\\d{1,${t}}))?`+`(?:\\\\.(\\\\d{1,${t}}))?`+\"(?:$|[^\\\\d])\"),n(\"COERCERTL\",i[o.COERCE],!0),n(\"LONETILDE\",\"(?:~>?)\"),n(\"TILDETRIM\",`(\\\\s*)${i[o.LONETILDE]}\\\\s+`,!0),r.tildeTrimReplace=\"$1~\",n(\"TILDE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),n(\"TILDELOOSE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"LONECARET\",\"(?:\\\\^)\"),n(\"CARETTRIM\",`(\\\\s*)${i[o.LONECARET]}\\\\s+`,!0),r.caretTrimReplace=\"$1^\",n(\"CARET\",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),n(\"CARETLOOSE\",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"COMPARATORLOOSE\",`^${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]})$|^$`),n(\"COMPARATOR\",`^${i[o.GTLT]}\\\\s*(${i[o.FULLPLAIN]})$|^$`),n(\"COMPARATORTRIM\",`(\\\\s*)${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace=\"$1$2$3\",n(\"HYPHENRANGE\",`^\\\\s*(${i[o.XRANGEPLAIN]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAIN]})`+\"\\\\s*$\"),n(\"HYPHENRANGELOOSE\",`^\\\\s*(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s*$\"),n(\"STAR\",\"(<|>)?=?\\\\s*\\\\*\"),n(\"GTE0\",\"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"),n(\"GTE0PRE\",\"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\")}),numeric=/^[0-9]+$/,compareIdentifiers$1=(e,r)=>{const t=numeric.test(e),s=numeric.test(r);return t&&s&&(e=+e,r=+r),e===r?0:t&&!s?-1:s&&!t?1:e<r?-1:1},rcompareIdentifiers=(e,r)=>compareIdentifiers$1(r,e),identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:rcompareIdentifiers},{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=constants,{re:re$4,t:t$4}=re_1,{compareIdentifiers:compareIdentifiers}=identifiers;class SemVer{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(\"string\"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug_1(\"SemVer\",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const t=e.trim().match(r.loose?re$4[t$4.LOOSE]:re$4[t$4.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError(\"Invalid major version\");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError(\"Invalid minor version\");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError(\"Invalid patch version\");t[4]?this.prerelease=t[4].split(\".\").map(e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<MAX_SAFE_INTEGER)return r}return e}):this.prerelease=[],this.build=t[5]?t[5].split(\".\"):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(\".\")}`),this.version}toString(){return this.version}compare(e){if(debug_1(\"SemVer.compare\",this.version,this.options,e),!(e instanceof SemVer)){if(\"string\"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],s=e.prerelease[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let r=0;do{const t=this.build[r],s=e.build[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}inc(e,r){switch(e){case\"premajor\":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(\"pre\",r);break;case\"preminor\":this.prerelease.length=0,this.patch=0,this.minor++,this.inc(\"pre\",r);break;case\"prepatch\":this.prerelease.length=0,this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"prerelease\":0===this.prerelease.length&&this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"major\":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case\"minor\":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case\"patch\":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case\"pre\":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)\"number\"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}const compare=(e,r,t)=>new SemVer(e,t).compare(new SemVer(r,t)),compare_1=compare,eq=(e,r,t)=>0===compare_1(e,r,t),eq_1=eq,neq=(e,r,t)=>0!==compare_1(e,r,t),neq_1=neq,gt=(e,r,t)=>compare_1(e,r,t)>0,gt_1=gt,gte=(e,r,t)=>compare_1(e,r,t)>=0,gte_1=gte,lt=(e,r,t)=>compare_1(e,r,t)<0,lt_1=lt,lte=(e,r,t)=>compare_1(e,r,t)<=0,lte_1=lte,cmp=(e,r,t,s)=>{switch(r){case\"===\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e===t;case\"!==\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e!==t;case\"\":case\"=\":case\"==\":return eq_1(e,t,s);case\"!=\":return neq_1(e,t,s);case\">\":return gt_1(e,t,s);case\">=\":return gte_1(e,t,s);case\"<\":return lt_1(e,t,s);case\"<=\":return lte_1(e,t,s);default:throw new TypeError(`Invalid operator: ${r}`)}},cmp_1=cmp,ANY=Symbol(\"SemVer ANY\");class Comparator{static get ANY(){return ANY}constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Comparator){if(e.loose===!!r.loose)return e;e=e.value}debug_1(\"comparator\",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ANY?this.value=\"\":this.value=this.operator+this.semver.version,debug_1(\"comp\",this)}parse(e){const r=this.options.loose?re$3[t$3.COMPARATORLOOSE]:re$3[t$3.COMPARATOR],t=e.match(r);if(!t)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==t[1]?t[1]:\"\",\"=\"===this.operator&&(this.operator=\"\"),t[2]?this.semver=new SemVer(t[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(e){if(debug_1(\"Comparator.test\",e,this.options.loose),this.semver===ANY||e===ANY)return!0;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}return cmp_1(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Comparator))throw new TypeError(\"a Comparator is required\");if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),\"\"===this.operator)return\"\"===this.value||new Range(e.value,r).test(this.value);if(\"\"===e.operator)return\"\"===e.value||new Range(this.value,r).test(e.semver);const t=!(\">=\"!==this.operator&&\">\"!==this.operator||\">=\"!==e.operator&&\">\"!==e.operator),s=!(\"<=\"!==this.operator&&\"<\"!==this.operator||\"<=\"!==e.operator&&\"<\"!==e.operator),i=this.semver.version===e.semver.version,o=!(\">=\"!==this.operator&&\"<=\"!==this.operator||\">=\"!==e.operator&&\"<=\"!==e.operator),a=cmp_1(this.semver,\"<\",e.semver,r)&&(\">=\"===this.operator||\">\"===this.operator)&&(\"<=\"===e.operator||\"<\"===e.operator),n=cmp_1(this.semver,\">\",e.semver,r)&&(\"<=\"===this.operator||\"<\"===this.operator)&&(\">=\"===e.operator||\">\"===e.operator);return t||s||i&&o||a||n}}const{re:re$3,t:t$3}=re_1;class Range{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Range)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Range(e.raw,r);if(e instanceof Comparator)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\\s*\\|\\|\\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(\" \").trim()).join(\"||\").trim(),this.range}toString(){return this.range}parseRange(e){const{loose:r}=this.options;e=e.trim();const t=r?re$2[t$2.HYPHENRANGELOOSE]:re$2[t$2.HYPHENRANGE];e=e.replace(t,hyphenReplace(this.options.includePrerelease)),debug_1(\"hyphen replace\",e),e=e.replace(re$2[t$2.COMPARATORTRIM],comparatorTrimReplace),debug_1(\"comparator trim\",e,re$2[t$2.COMPARATORTRIM]),e=(e=(e=e.replace(re$2[t$2.TILDETRIM],tildeTrimReplace)).replace(re$2[t$2.CARETTRIM],caretTrimReplace)).split(/\\s+/).join(\" \");const s=r?re$2[t$2.COMPARATORLOOSE]:re$2[t$2.COMPARATOR];return e.split(\" \").map(e=>parseComparator(e,this.options)).join(\" \").split(/\\s+/).map(e=>replaceGTE0(e,this.options)).filter(this.options.loose?e=>!!e.match(s):()=>!0).map(e=>new Comparator(e,this.options))}intersects(e,r){if(!(e instanceof Range))throw new TypeError(\"a Range is required\");return this.set.some(t=>isSatisfiable(t,r)&&e.set.some(e=>isSatisfiable(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(testSet(this.set[r],e,this.options))return!0;return!1}}const{re:re$2,t:t$2,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=re_1,isSatisfiable=(e,r)=>{let t=!0;const s=e.slice();let i=s.pop();for(;t&&s.length;)t=s.every(e=>i.intersects(e,r)),i=s.pop();return t},parseComparator=(e,r)=>(debug_1(\"comp\",e,r),e=replaceCarets(e,r),debug_1(\"caret\",e),e=replaceTildes(e,r),debug_1(\"tildes\",e),e=replaceXRanges(e,r),debug_1(\"xrange\",e),e=replaceStars(e,r),debug_1(\"stars\",e),e),isX=e=>!e||\"x\"===e.toLowerCase()||\"*\"===e,replaceTildes=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceTilde(e,r)).join(\" \"),replaceTilde=(e,r)=>{const t=r.loose?re$2[t$2.TILDELOOSE]:re$2[t$2.TILDE];return e.replace(t,(r,t,s,i,o)=>{let a;return debug_1(\"tilde\",e,r,t,s,i,o),isX(t)?a=\"\":isX(s)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:isX(i)?a=`>=${t}.${s}.0 <${t}.${+s+1}.0-0`:o?(debug_1(\"replaceTilde pr\",o),a=`>=${t}.${s}.${i}-${o} <${t}.${+s+1}.0-0`):a=`>=${t}.${s}.${i} <${t}.${+s+1}.0-0`,debug_1(\"tilde return\",a),a})},replaceCarets=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceCaret(e,r)).join(\" \"),replaceCaret=(e,r)=>{debug_1(\"caret\",e,r);const t=r.loose?re$2[t$2.CARETLOOSE]:re$2[t$2.CARET],s=r.includePrerelease?\"-0\":\"\";return e.replace(t,(r,t,i,o,a)=>{let n;return debug_1(\"caret\",e,r,t,i,o,a),isX(t)?n=\"\":isX(i)?n=`>=${t}.0.0${s} <${+t+1}.0.0-0`:isX(o)?n=\"0\"===t?`>=${t}.${i}.0${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.0${s} <${+t+1}.0.0-0`:a?(debug_1(\"replaceCaret pr\",a),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}-${a} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}-${a} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o}-${a} <${+t+1}.0.0-0`):(debug_1(\"no pr\"),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}${s} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o} <${+t+1}.0.0-0`),debug_1(\"caret return\",n),n})},replaceXRanges=(e,r)=>(debug_1(\"replaceXRanges\",e,r),e.split(/\\s+/).map(e=>replaceXRange(e,r)).join(\" \")),replaceXRange=(e,r)=>{e=e.trim();const t=r.loose?re$2[t$2.XRANGELOOSE]:re$2[t$2.XRANGE];return e.replace(t,(t,s,i,o,a,n)=>{debug_1(\"xRange\",e,t,s,i,o,a,n);const E=isX(i),p=E||isX(o),l=p||isX(a),c=l;return\"=\"===s&&c&&(s=\"\"),n=r.includePrerelease?\"-0\":\"\",E?t=\">\"===s||\"<\"===s?\"<0.0.0-0\":\"*\":s&&c?(p&&(o=0),a=0,\">\"===s?(s=\">=\",p?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):\"<=\"===s&&(s=\"<\",p?i=+i+1:o=+o+1),\"<\"===s&&(n=\"-0\"),t=`${s+i}.${o}.${a}${n}`):p?t=`>=${i}.0.0${n} <${+i+1}.0.0-0`:l&&(t=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`),debug_1(\"xRange return\",t),t})},replaceStars=(e,r)=>(debug_1(\"replaceStars\",e,r),e.trim().replace(re$2[t$2.STAR],\"\")),replaceGTE0=(e,r)=>(debug_1(\"replaceGTE0\",e,r),e.trim().replace(re$2[r.includePrerelease?t$2.GTE0PRE:t$2.GTE0],\"\")),hyphenReplace=e=>(r,t,s,i,o,a,n,E,p,l,c,$,h)=>`${t=isX(s)?\"\":isX(i)?`>=${s}.0.0${e?\"-0\":\"\"}`:isX(o)?`>=${s}.${i}.0${e?\"-0\":\"\"}`:a?`>=${t}`:`>=${t}${e?\"-0\":\"\"}`} ${E=isX(p)?\"\":isX(l)?`<${+p+1}.0.0-0`:isX(c)?`<${p}.${+l+1}.0-0`:$?`<=${p}.${l}.${c}-${$}`:e?`<${p}.${l}.${+c+1}-0`:`<=${E}`}`.trim(),testSet=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(debug_1(e[t].semver),e[t].semver!==Comparator.ANY&&e[t].semver.prerelease.length>0){const s=e[t].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0};export const satisfies=(e,r,t)=>{try{r=new Range(r,t)}catch(e){return!1}return r.test(e)};const satisfies_1=satisfies,{MAX_LENGTH:MAX_LENGTH}=constants,{re:re$1,t:t$1}=re_1,parse=(e,r)=>{if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer)return e;if(\"string\"!=typeof e)return null;if(e.length>MAX_LENGTH)return null;if(!(r.loose?re$1[t$1.LOOSE]:re$1[t$1.FULL]).test(e))return null;try{return new SemVer(e,r)}catch(e){return null}},parse_1=parse,{re:re,t:t}=re_1;export const coerce=(e,r)=>{if(e instanceof SemVer)return e;if(\"number\"==typeof e&&(e=String(e)),\"string\"!=typeof e)return null;let s=null;if((r=r||{}).rtl){let r;for(;(r=re[t.COERCERTL].exec(e))&&(!s||s.index+s[0].length!==e.length);)s&&r.index+r[0].length===s.index+s[0].length||(s=r),re[t.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;re[t.COERCERTL].lastIndex=-1}else s=e.match(re[t.COERCE]);return null===s?null:parse_1(`${s[2]}.${s[3]||\"0\"}.${s[4]||\"0\"}`,r)};\n","function percentToByte(p: string) {\n  return String.fromCharCode(parseInt(p.slice(1), 16));\n}\n\nfunction byteToPercent(b: string) {\n  return `%${`00${b.charCodeAt(0).toString(16)}`.slice(-2)}`;\n}\n\n/**\n * Encodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction btoaUTF8(str: string): string {\n  return btoa(encodeURIComponent(str).replace(/%[0-9A-F]{2}/g, percentToByte));\n}\n\n/**\n * Decodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction atobUTF8(str: string): string {\n  return decodeURIComponent(Array.from(atob(str), byteToPercent).join(''));\n}\n\n/**\n * Given a JSON-serializable object, encode as a Base64 string.\n */\nexport function encodeJSON<T>(options: T): string {\n  return btoaUTF8(JSON.stringify(options));\n}\n\n/**\n * Given a Base64 JSON string, decode a JavaScript object.\n */\nexport function decodeJSON<T>(queryString: string): T {\n  return JSON.parse(atobUTF8(queryString));\n}\n","/**\n * This file contains our type guards.\n *\n * Type guards are a feature of TypeScript which narrow the type signature of\n * intesection types (types that can be one thing or another).\n *\n * @see\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\n */\n\nimport { JsonRpcRequestPayload, JsonRpcResponsePayload, MagicPayloadMethod, RPCErrorCode } from '@magic-sdk/types';\n\n/**\n * Assert `value` is `undefined`.\n */\nfunction isUndefined(value: any): value is undefined {\n  return typeof value === 'undefined';\n}\n\n/**\n * Assert `value` is `null`.\n */\nfunction isNull(value: any): value is null {\n  return value === null;\n}\n\n/**\n * Assert `value` is `null` or `undefined`.\n */\nfunction isNil(value: any): value is null | undefined {\n  return isNull(value) || isUndefined(value);\n}\n\n/**\n * Assert `value` is a `JsonRpcRequestPayload` object.\n */\nexport function isJsonRpcRequestPayload(value?: JsonRpcRequestPayload): value is JsonRpcRequestPayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && !isUndefined(value.method) && !isUndefined(value.params)\n  );\n}\n\n/**\n * Assert `value` is a `JsonRpcResponsePayload` object.\n */\nexport function isJsonRpcResponsePayload(value: any): value is JsonRpcResponsePayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && (!isUndefined(value.result) || !isUndefined(value.error))\n  );\n}\n\n/**\n * Assert `value` is a Magic SDK payload method identifier.\n */\nexport function isMagicPayloadMethod(value?: any): value is MagicPayloadMethod {\n  if (isNil(value)) return false;\n  return typeof value === 'string' && Object.values(MagicPayloadMethod).includes(value as any);\n}\n\n/**\n * Assert `value` is an expected JSON RPC error code.\n */\nexport function isJsonRpcErrorCode(value?: any): value is RPCErrorCode {\n  if (isNil(value)) return false;\n  return typeof value === 'number' && Object.values(RPCErrorCode).includes(value);\n}\n\n/**\n * Assert `value` is an empty, plain object.\n */\nexport function isEmpty(value?: any): value is {} {\n  if (!value) return true;\n\n  for (const key in value) {\n    /* istanbul ignore else */\n    if (Object.hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import type localForage from 'localforage';\nimport type { ViewController } from './view-controller';\nimport type { SDKBase } from './sdk';\nimport type { WithExtensions } from '../modules/base-extension';\n\ntype ConstructorOf<C> = { new (...args: any[]): C };\n\n/**\n * A structure containing details about the current environment.\n * This is guaranteed to be populated before the SDK is instantiated.\n */\nexport interface SDKEnvironment {\n  sdkName: 'magic-sdk' | '@magic-sdk/react-native';\n  version: string;\n  platform: 'web' | 'react-native';\n  defaultEndpoint: string;\n  ViewController: ConstructorOf<ViewController>;\n  configureStorage: () => Promise<typeof localForage>;\n}\n\nexport const SDKEnvironment: SDKEnvironment = {} as any;\n\nexport function createSDK<SDK extends SDKBase>(\n  SDKBaseCtor: ConstructorOf<SDK>,\n  environment: SDKEnvironment,\n): WithExtensions<SDK> {\n  Object.assign(SDKEnvironment, environment);\n  return SDKBaseCtor as any;\n}\n\nexport const sdkNameToEnvName = {\n  'magic-sdk': 'magic-sdk' as const,\n  '@magic-sdk/react-native': 'magic-sdk-rn' as const,\n};\n","import { JsonRpcError, RPCErrorCode, SDKErrorCode, SDKWarningCode } from '@magic-sdk/types';\nimport { isJsonRpcErrorCode } from '../util/type-guards';\nimport { SDKEnvironment } from './sdk-environment';\nimport { Extension } from '../modules/base-extension';\n\n// --- Error/warning classes\n\n/**\n * This error type represents internal SDK errors. This could be developer\n * mistakes (or Magic's mistakes), or execution errors unrelated to standard\n * JavaScript exceptions.\n */\nexport class MagicSDKError extends Error {\n  __proto__ = Error;\n\n  constructor(public code: SDKErrorCode, public rawMessage: string) {\n    super(`Magic SDK Error: [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicSDKError.prototype);\n  }\n}\n\n/**\n * This error type communicates exceptions that occur during execution in the\n * Magic `<iframe>` context.\n */\nexport class MagicRPCError extends Error {\n  __proto__ = Error;\n\n  public code: RPCErrorCode | number;\n  public rawMessage: string;\n\n  constructor(sourceError?: JsonRpcError | null) {\n    super();\n\n    const codeNormalized = Number(sourceError?.code);\n    this.rawMessage = sourceError?.message || 'Internal error';\n    this.code = isJsonRpcErrorCode(codeNormalized) ? codeNormalized : RPCErrorCode.InternalError;\n    this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`;\n\n    Object.setPrototypeOf(this, MagicRPCError.prototype);\n  }\n}\n\n/**\n * In contrast to `SDKError` objects, this \"warning\" type communicates important\n * context that does not rise to the level of an exception. These should be\n * logged rather than thrown.\n */\nexport class MagicSDKWarning {\n  public message: string;\n\n  constructor(public code: SDKWarningCode, public rawMessage: string) {\n    this.message = `Magic SDK Warning: [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n/**\n * This error type is reserved for communicating errors that arise during\n * execution of Magic SDK Extension methods. Compare this to the `SDKError`\n * type, specifically in context of Extensions.\n */\nexport class MagicExtensionError<TData = any> extends Error {\n  __proto__ = Error;\n\n  constructor(ext: Extension<string>, public code: string | number, public rawMessage: string, public data: TData) {\n    super(`Magic Extension Error (${ext.name}): [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicExtensionError.prototype);\n  }\n}\n\n/**\n * In contrast to `MagicExtensionError` objects, this \"warning\" type\n * communicates important context that does not rise to the level of an\n * exception. These should be logged rather than thrown.\n */\nexport class MagicExtensionWarning {\n  public message: string;\n\n  constructor(ext: Extension<string>, public code: string | number, public rawMessage: string) {\n    this.message = `Magic Extension Warning (${ext.name}): [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n// --- SDK error factories\n\nexport function createMissingApiKeyError() {\n  return new MagicSDKError(\n    SDKErrorCode.MissingApiKey,\n    'Please provide an API key that you acquired from the Magic developer dashboard.',\n  );\n}\n\nexport function createModalNotReadyError() {\n  return new MagicSDKError(SDKErrorCode.ModalNotReady, 'Modal is not ready.');\n}\n\nexport function createMalformedResponseError() {\n  return new MagicSDKError(SDKErrorCode.MalformedResponse, 'Response from the Magic iframe is malformed.');\n}\n\nexport function createExtensionNotInitializedError(member: string) {\n  return new MagicSDKError(\n    SDKErrorCode.ExtensionNotInitialized,\n    `Extensions must be initialized with a Magic SDK instance before \\`Extension.${member}\\` can be accessed. Do not invoke \\`Extension.${member}\\` inside an extension constructor.`,\n  );\n}\n\nexport function createIncompatibleExtensionsError(extensions: Extension<string>[]) {\n  let msg = `Some extensions are incompatible with \\`${SDKEnvironment.sdkName}@${SDKEnvironment.version}\\`:`;\n\n  extensions\n    .filter((ext) => typeof ext.compat !== 'undefined' && ext.compat !== null)\n    .forEach((ext) => {\n      const compat = ext.compat![SDKEnvironment.sdkName];\n\n      /* istanbul ignore else */\n      if (typeof compat === 'string') {\n        msg += `\\n  - Extension \\`${ext.name}\\` supports version(s) \\`${compat}\\``;\n      } else if (!compat) {\n        msg += `\\n  - Extension \\`${ext.name}\\` does not support ${SDKEnvironment.platform} environments.`;\n      }\n\n      // Else case is irrelevant here here\n      // (we filter out extensions with missing `compat` field)\n    });\n\n  return new MagicSDKError(SDKErrorCode.IncompatibleExtensions, msg);\n}\n\nexport function createInvalidArgumentError(options: {\n  procedure: string;\n  argument: number;\n  expected: string;\n  received: string;\n}) {\n  /**\n   * Parses the argument index (given by `argument`) to attach the correct ordinal suffix.\n   * (i.e.: 1st, 2nd, 3rd, 4th, etc.)\n   */\n  const ordinalSuffix = (i: number) => {\n    const iAdjusted = i + 1; // Argument is zero-indexed.\n    const j = iAdjusted % 10;\n    const k = iAdjusted % 100;\n    if (j === 1 && k !== 11) return `${iAdjusted}st`;\n    if (j === 2 && k !== 12) return `${iAdjusted}nd`;\n    if (j === 3 && k !== 13) return `${iAdjusted}rd`;\n    return `${iAdjusted}th`;\n  };\n\n  return new MagicSDKError(\n    SDKErrorCode.InvalidArgument,\n    `Invalid ${ordinalSuffix(options.argument)} argument given to \\`${options.procedure}\\`.\\n` +\n      `  Expected: \\`${options.expected}\\`\\n` +\n      `  Received: \\`${options.received}\\``,\n  );\n}\n\n// --- SDK warning factories\n\nexport function createDuplicateIframeWarning() {\n  return new MagicSDKWarning(SDKWarningCode.DuplicateIframe, 'Duplicate iframes found.');\n}\n\nexport function createSynchronousWeb3MethodWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.SyncWeb3Method,\n    'Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.',\n  );\n}\n\nexport function createReactNativeEndpointConfigurationWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.ReactNativeEndpointConfiguration,\n    `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \\`endpoint\\` parameter SHOULD NOT be provided. The Magic \\`<iframe>\\` is automatically wrapped by a WebView pointed at \\`${SDKEnvironment.defaultEndpoint}\\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`,\n  );\n}\n\nexport function createDeprecationWarning(options: {\n  method: string;\n  removalVersions: { [P in 'magic-sdk' | '@magic-sdk/react-native']: string };\n  useInstead?: string;\n}) {\n  const { method, removalVersions, useInstead } = options;\n\n  const removalVersion = removalVersions[SDKEnvironment.sdkName];\n  const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n  const message = `\\`${method}\\` will be removed from \\`${SDKEnvironment.sdkName}\\` in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n\n  return new MagicSDKWarning(SDKWarningCode.DeprecationNotice, message);\n}\n","function* createIntGenerator(): Generator<number, number, void> {\n  let index = 0;\n\n  while (true) {\n    /* istanbul ignore next */\n    if (index < Number.MAX_SAFE_INTEGER) yield ++index;\n    else index = 0;\n  }\n}\n\nconst intGenerator = createIntGenerator();\n\n/**\n * Get an integer ID for attaching to a JSON RPC request payload.\n */\nexport function getPayloadId(): number {\n  return intGenerator.next().value;\n}\n","/* eslint-disable no-param-reassign */\n\nimport { JsonRpcRequestPayload, JsonRpcResponsePayload, JsonRpcError } from '@magic-sdk/types';\nimport { isJsonRpcResponsePayload } from '../util/type-guards';\nimport { getPayloadId } from '../util/get-payload-id';\n\nconst payloadPreprocessedSymbol = Symbol('Payload pre-processed by Magic SDK');\n\n/**\n * To avoid \"pre-processing\" a payload more than once (and needlessly\n * incrementing our payload ID generator), we attach a symbol to detect a\n * payloads we've already visited.\n */\nfunction markPayloadAsPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T): T {\n  Object.defineProperty(payload, payloadPreprocessedSymbol, {\n    value: true,\n    enumerable: false,\n  });\n\n  return payload;\n}\n\n/**\n * Returns `true` if the payload has been visited by our \"pre-processing,\" in\n * `standardizeJsonRpcRequestPayload(...)`.\n */\nfunction isPayloadPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T) {\n  return !!(payload as any)[payloadPreprocessedSymbol];\n}\n\n/**\n * Returns a full `JsonRpcRequestPayload` from a potentially incomplete payload\n * object. This method mutates the given `payload` to preserve compatibility\n * with external libraries that perform their own `JsonRpcRequestPayload.id`\n * check to associate responses (such as `web3`).\n *\n * This function is no-op if the payload has already been processed before.\n */\nexport function standardizeJsonRpcRequestPayload(payload: Partial<JsonRpcRequestPayload>) {\n  if (!isPayloadPreprocessed(payload)) {\n    payload.jsonrpc = payload.jsonrpc ?? '2.0';\n    payload.id = getPayloadId();\n    payload.method = payload.method ?? 'noop';\n    payload.params = payload.params ?? [];\n\n    markPayloadAsPreprocessed(payload);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion */\n  return payload as JsonRpcRequestPayload;\n}\n\n/**\n * Build a valid JSON RPC payload for emitting to the Magic SDK iframe relayer.\n */\nexport function createJsonRpcRequestPayload(method: string, params: any[] = []): JsonRpcRequestPayload {\n  return markPayloadAsPreprocessed({\n    params,\n    method,\n    jsonrpc: '2.0',\n    id: getPayloadId(),\n  });\n}\n\n/**\n * Formats and standardizes a JSON RPC 2.0 response from a number of potential\n * sources.\n */\nexport class JsonRpcResponse<ResultType = any> {\n  private readonly _jsonrpc: string;\n  private readonly _id: string | number | null;\n  private _result?: ResultType | null;\n  private _error?: JsonRpcError | null;\n\n  constructor(responsePayload: JsonRpcResponsePayload);\n  constructor(response: JsonRpcResponse<ResultType>);\n  constructor(requestPayload: JsonRpcRequestPayload);\n  constructor(responseOrPayload: JsonRpcResponsePayload | JsonRpcResponse<ResultType> | JsonRpcRequestPayload) {\n    if (responseOrPayload instanceof JsonRpcResponse) {\n      this._jsonrpc = responseOrPayload.payload.jsonrpc;\n      this._id = responseOrPayload.payload.id;\n      this._result = responseOrPayload.payload.result;\n      this._error = responseOrPayload.payload.error;\n    } else if (isJsonRpcResponsePayload(responseOrPayload)) {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = responseOrPayload.result;\n      this._error = responseOrPayload.error;\n    } else {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = undefined;\n      this._error = undefined;\n    }\n  }\n\n  public applyError(error?: JsonRpcError | null) {\n    this._error = error;\n    return this;\n  }\n\n  public applyResult(result?: ResultType | null) {\n    this._result = result;\n    return this;\n  }\n\n  public get hasError() {\n    return typeof this._error !== 'undefined' && this._error !== null;\n  }\n\n  public get hasResult() {\n    return typeof this._result !== 'undefined';\n  }\n\n  public get payload(): JsonRpcResponsePayload {\n    return {\n      jsonrpc: this._jsonrpc,\n      id: this._id,\n      result: this._result,\n      error: this._error,\n    };\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nexport type EventsDefinition = { [K in string | symbol]: (...args: any[]) => void } | void;\n\n/**\n * An extension of `EventEmitter` (provided by `eventemitter3`) with an adjusted\n * type interface that supports the unique structure of Magic SDK modules.\n */\nexport class TypedEmitter<Events extends EventsDefinition = void> extends EventEmitter<\n  Events extends void ? string | symbol : Events\n> {}\n\ntype ChainingMethods = 'on' | 'once' | 'addListener' | 'off' | 'removeListener' | 'removeAllListeners';\ntype NonChainingMethods = 'emit' | 'eventNames' | 'listeners' | 'listenerCount';\n\ntype ReplaceReturnType<T extends (...a: any) => any, TNewReturn> = (...a: Parameters<T>) => TNewReturn;\n\n/**\n * Creates a `TypedEmitter` instance and returns helper functions for easily\n * mixing `TypedEmitter` methods into other objects.\n */\nexport function createTypedEmitter<Events extends EventsDefinition = void>() {\n  const emitter = new TypedEmitter<Events>();\n\n  const createChainingEmitterMethod = <T1 extends ChainingMethods, T2>(\n    method: T1,\n    source: T2,\n  ): ReplaceReturnType<TypedEmitter[T1], T2> => {\n    return (...args: any[]) => {\n      (emitter as any)[method].apply(emitter, args);\n      return source;\n    };\n  };\n\n  const createBoundEmitterMethod = <T extends NonChainingMethods>(method: T): TypedEmitter[T] => {\n    return (...args: any[]) => {\n      return (emitter as any)[method].apply(emitter, args);\n    };\n  };\n\n  return {\n    emitter,\n    createChainingEmitterMethod,\n    createBoundEmitterMethod,\n  };\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { TypedEmitter, EventsDefinition, createTypedEmitter } from './events';\n\n/**\n * Extends `Promise` with a polymorphic `this` type to accomodate arbitrary\n * `Promise` API extensions.\n */\ninterface ExtendedPromise<T> extends Promise<T> {\n  then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): ExtendedPromise<TResult1 | TResult2> & this;\n\n  catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): ExtendedPromise<T | TResult> & this;\n\n  finally(onfinally?: (() => void) | undefined | null): ExtendedPromise<T> & this;\n}\n\n/**\n * A `Promise` and `EventEmitter` all in one!\n */\nexport type PromiEvent<TResult, TEvents extends EventsDefinition = void> = ExtendedPromise<TResult> &\n  TypedEmitter<TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>>;\n\n/**\n * Default events attached to every `PromiEvent`.\n */\ntype DefaultEvents<TResult> = {\n  done: (result: TResult) => void;\n  error: (reason: any) => void;\n  settled: () => void;\n};\n\n/**\n * A `Promise` executor with can be optionally asynchronous.\n */\ntype AsyncPromiseExecutor<TResult> = (\n  resolve: (value: TResult | PromiseLike<TResult>) => void,\n  reject: (reason?: any) => void,\n) => void | Promise<void>;\n\nconst promiEventBrand = Symbol('isPromiEvent');\n\n/**\n * Returns `true` if the given `value` is a `PromiEvent`.\n */\nexport function isPromiEvent(value: any): value is PromiEvent<any> {\n  return !!value[promiEventBrand];\n}\n\n/**\n * Create a native JavaScript `Promise` overloaded with strongly-typed methods\n * from `EventEmitter`.\n */\nexport function createPromiEvent<TResult, TEvents extends EventsDefinition = void>(\n  executor: AsyncPromiseExecutor<TResult>,\n): PromiEvent<TResult, TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>> {\n  const promise = createPromise(executor);\n  const { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter<\n    TEvents & DefaultEvents<TResult>\n  >();\n\n  // We save the original `Promise` methods to the following symbols so we can\n  // access them internally.\n  const thenSymbol = Symbol('Promise.then');\n  const catchSymbol = Symbol('Promise.catch');\n  const finallySymbol = Symbol('Promise.finally');\n\n  /**\n   * Ensures the next object in the `PromiEvent` chain is overloaded with\n   * `EventEmitter` methods.\n   */\n  const createChainingPromiseMethod =\n    (method: typeof thenSymbol | typeof catchSymbol | typeof finallySymbol, source: Promise<any>) =>\n    (...args: any[]) => {\n      const nextPromise = (source as any)[method].apply(source, args);\n      return promiEvent(nextPromise);\n    };\n\n  /**\n   * Builds a `PromiEvent` by assigning `EventEmitter` methods to a native\n   * `Promise` object.\n   */\n  const promiEvent = (source: any) => {\n    return Object.assign(source, {\n      [promiEventBrand]: true,\n\n      [thenSymbol]: source[thenSymbol] || source.then,\n      [catchSymbol]: source[catchSymbol] || source.catch,\n      [finallySymbol]: source[finallySymbol] || source.finally,\n\n      then: createChainingPromiseMethod(thenSymbol, source),\n      catch: createChainingPromiseMethod(catchSymbol, source),\n      finally: createChainingPromiseMethod(finallySymbol, source),\n\n      on: createChainingEmitterMethod('on', source),\n      once: createChainingEmitterMethod('once', source),\n      addListener: createChainingEmitterMethod('addListener', source),\n\n      off: createChainingEmitterMethod('off', source),\n      removeListener: createChainingEmitterMethod('removeListener', source),\n      removeAllListeners: createChainingEmitterMethod('removeAllListeners', source),\n\n      emit: createBoundEmitterMethod('emit'),\n      eventNames: createBoundEmitterMethod('eventNames'),\n      listeners: createBoundEmitterMethod('listeners'),\n      listenerCount: createBoundEmitterMethod('listenerCount'),\n    });\n  };\n\n  const result = promiEvent(\n    promise.then(\n      (resolved) => {\n        // Emit default completion events and resolve result.\n        result.emit('done', resolved);\n        result.emit('settled');\n        return resolved;\n      },\n\n      (err) => {\n        // Emit default error events and re-throw.\n        result.emit('error', err);\n        result.emit('settled');\n        throw err;\n      },\n    ),\n  );\n\n  return result;\n}\n\n/**\n * Creates a `Promise` with an **async executor** that automatically catches\n * errors occurring within the executor. Nesting promises in this way is usually\n * deemed an _anti-pattern_, but it's useful and clean when promisifying the\n * event-based code that's inherent to JSON RPC.\n *\n * So, here we solve the issue of nested promises by ensuring that no errors\n * mistakenly go unhandled!\n */\nexport function createPromise<TResult>(executor: AsyncPromiseExecutor<TResult>) {\n  return new Promise<TResult>((resolve, reject) => {\n    const result = executor(resolve, reject);\n    Promise.resolve(result).catch(reject);\n  });\n}\n","import { SDKEnvironment } from '../core/sdk-environment';\n\nlet lf: LocalForage;\n\n/**\n * Proxies `localforage` methods with strong-typing.\n */\nfunction proxyLocalForageMethod<TMethod extends keyof LocalForageDbMethods>(method: TMethod): LocalForage[TMethod] {\n  return async (...args: any[]) => {\n    /* istanbul ignore else */\n    if (!lf) lf = await SDKEnvironment.configureStorage();\n    await lf.ready();\n    return (lf[method] as any)(...args);\n  };\n}\n\nexport const getItem = proxyLocalForageMethod('getItem');\nexport const setItem = proxyLocalForageMethod('setItem');\nexport const removeItem = proxyLocalForageMethod('removeItem');\nexport const clear = proxyLocalForageMethod('clear');\nexport const length = proxyLocalForageMethod('length');\nexport const key = proxyLocalForageMethod('key');\nexport const keys = proxyLocalForageMethod('keys');\nexport const iterate = proxyLocalForageMethod('iterate');\n","import { JsonRpcRequestPayload, MagicOutgoingWindowMessage, MagicIncomingWindowMessage } from '@magic-sdk/types';\nimport { createMalformedResponseError, MagicRPCError } from '../core/sdk-exceptions';\nimport type { SDKBase } from '../core/sdk';\nimport { standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { createPromiEvent } from '../util/promise-tools';\nimport type { ViewController } from '../core/view-controller';\nimport type { EventsDefinition } from '../util/events';\n\nexport class BaseModule {\n  constructor(protected sdk: SDKBase) {}\n\n  /**\n   * The `ViewController` for the SDK instance registered to this module.\n   */\n  protected get overlay(): ViewController {\n    return (this.sdk as any).overlay;\n  }\n\n  /**\n   * Emits promisified requests to the Magic `<iframe>` context.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    const responsePromise = this.overlay.post<ResultType>(\n      MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n      standardizeJsonRpcRequestPayload(payload),\n    );\n\n    // PromiEvent-ify the response.\n    const promiEvent = createPromiEvent<ResultType, Events>((resolve, reject) => {\n      responsePromise\n        .then((res) => {\n          cleanupEvents();\n          if (res.hasError) reject(new MagicRPCError(res.payload.error));\n          else if (res.hasResult) resolve(res.payload.result as ResultType);\n          else throw createMalformedResponseError();\n        })\n        .catch((err) => {\n          cleanupEvents();\n          reject(err);\n        });\n    });\n\n    // Listen for events from the `<iframe>` associated with the current payload\n    // and emit those to `PromiEvent` subscribers.\n    const cleanupEvents = this.overlay.on(MagicIncomingWindowMessage.MAGIC_HANDLE_EVENT, (evt) => {\n      const { response } = evt.data;\n\n      if (response.id === payload.id && response.result?.event) {\n        const { event, params = [] } = response.result;\n        promiEvent.emit(event, ...params);\n      }\n    });\n\n    return promiEvent;\n  }\n}\n","import { MagicPayloadMethod, LoginWithMagicLinkConfiguration, LoginWithSmsConfiguration } from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { SDKEnvironment } from '../core/sdk-environment';\n\ntype LoginWithMagicLinkEvents = {\n  'email-sent': () => void;\n  'email-not-deliverable': () => void;\n  retry: () => void;\n};\n\nexport class AuthModule extends BaseModule {\n  /**\n   * Initiate the \"magic link\" login flow for a user. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   */\n  public loginWithMagicLink(configuration: LoginWithMagicLinkConfiguration) {\n    const { email, showUI = true, redirectURI } = configuration;\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithMagicLinkTestMode : MagicPayloadMethod.LoginWithMagicLink,\n      [{ email, showUI, redirectURI }],\n    );\n    return this.request<string | null, LoginWithMagicLinkEvents>(requestPayload);\n  }\n\n  /**\n   * Initiate an SMS login flow for a user. If successful,\n   * this method will return a Decenteralized ID token (with a default lifespan\n   * of 15 minutes)\n   */\n  public loginWithSMS(configuration: LoginWithSmsConfiguration) {\n    const { phoneNumber } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithSmsTestMode : MagicPayloadMethod.LoginWithSms,\n      [{ phoneNumber, showUI: true }],\n    );\n    return this.request<string | null>(requestPayload);\n  }\n\n  /**\n   * Log a user in with a special one-time-use credential token. This is\n   * currently used during magic link flows with a configured redirect to\n   * hydrate the user session at the end of the flow. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   *\n   * If no argument is provided, a credential is automatically parsed from\n   * `window.location.search`.\n   */\n  public loginWithCredential(credentialOrQueryString?: string) {\n    let credentialResolved = credentialOrQueryString ?? '';\n\n    if (!credentialOrQueryString && SDKEnvironment.platform === 'web') {\n      credentialResolved = window.location.search;\n\n      // Remove the query from the redirect callback as a precaution.\n      const urlWithoutQuery = window.location.origin + window.location.pathname;\n      window.history.replaceState(null, '', urlWithoutQuery);\n    }\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithCredentialTestMode : MagicPayloadMethod.LoginWithCredential,\n      [credentialResolved],\n    );\n\n    return this.request<string | null>(requestPayload);\n  }\n}\n","/* eslint-disable no-bitwise */\nexport function uuid() {\n  const u = window.crypto.getRandomValues(new Uint8Array(16));\n\n  // set the version bit to v4\n  u[6] = (u[6] & 0x0f) | 0x40;\n\n  // set the variant bit to \"don't care\" (yes, the RFC\n  // calls it that)\n  u[8] = (u[8] & 0xbf) | 0x80;\n\n  // hex encode them and add the dashes\n  let uid = '';\n  uid += u[0].toString(16);\n  uid += u[1].toString(16);\n  uid += u[2].toString(16);\n  uid += u[3].toString(16);\n  uid += '-';\n\n  uid += u[4].toString(16);\n  uid += u[5].toString(16);\n  uid += '-';\n\n  uid += u[6].toString(16);\n  uid += u[7].toString(16);\n  uid += '-';\n\n  uid += u[8].toString(16);\n  uid += u[9].toString(16);\n  uid += '-';\n\n  uid += u[10].toString(16);\n  uid += u[11].toString(16);\n  uid += u[12].toString(16);\n  uid += u[13].toString(16);\n  uid += u[14].toString(16);\n  uid += u[15].toString(16);\n\n  return uid;\n}\n","import { setItem, getItem, removeItem } from './storage';\nimport { uuid } from './uuid';\n\nexport const STORE_KEY_PRIVATE_KEY = 'STORE_KEY_PRIVATE_KEY';\nexport const STORE_KEY_PUBLIC_JWK = 'STORE_KEY_PUBLIC_JWK';\nconst ALGO_NAME = 'ECDSA';\nconst ALGO_CURVE = 'P-256';\n\nconst EC_GEN_PARAMS: EcKeyGenParams = {\n  name: ALGO_NAME,\n  namedCurve: ALGO_CURVE,\n};\nconst EC_IMPORT_PARAMS: EcKeyImportParams = {\n  name: ALGO_NAME,\n  namedCurve: ALGO_CURVE,\n};\n\nexport function clearKeys() {\n  removeItem(STORE_KEY_PUBLIC_JWK);\n  removeItem(STORE_KEY_PRIVATE_KEY);\n}\n\nexport async function createJwt() {\n  // will return undefiend is webcrypto is not supported\n  const publicJwk = await getPublicKey();\n\n  if (!publicJwk) {\n    console.info('unable to create public key or webcrypto is unsupported');\n    return undefined;\n  }\n\n  const { subtle } = window.crypto;\n  const privateJwk = await getItem<CryptoKey>(STORE_KEY_PRIVATE_KEY);\n\n  if (!privateJwk || !subtle) {\n    console.info('unable to find private key or webcrypto unsupported');\n    return undefined;\n  }\n\n  const claims = {\n    iat: Math.floor(new Date().getTime() / 1000),\n    jti: uuid(),\n  };\n\n  const headers = {\n    typ: 'dpop+jwt',\n    alg: 'ES256',\n    jwk: publicJwk,\n  };\n\n  const jws = {\n    protected: strToUrlBase64(JSON.stringify(headers)),\n    claims: strToUrlBase64(JSON.stringify(claims)),\n  };\n\n  const data = strToUint8(`${jws.protected}.${jws.claims}`);\n  const sigType = { name: ALGO_NAME, hash: { name: 'SHA-256' } };\n\n  const sig = uint8ToUrlBase64(new Uint8Array(await subtle.sign(sigType, privateJwk, data)));\n  return `${jws.protected}.${jws.claims}.${sig}`;\n}\n\nasync function getPublicKey() {\n  if (!isWebCryptoSupported()) {\n    console.info('webcrypto is not supported');\n    return undefined;\n  }\n\n  if (!(await getItem(STORE_KEY_PUBLIC_JWK))) {\n    await generateWCKP();\n  }\n\n  return getItem(STORE_KEY_PUBLIC_JWK) as JsonWebKey;\n}\n\nasync function generateWCKP() {\n  // to avoid a nasty babel bug we have to hoist this above the await ourselves\n  // https://github.com/rpetrich/babel-plugin-transform-async-to-promises/issues/20\n  let jwkPublicKey = null;\n  const { subtle } = window.crypto;\n  const kp = await subtle.generateKey(\n    EC_GEN_PARAMS,\n    true, // need to export the public key which means private exports too\n    ['sign'],\n  );\n\n  // export keys so we can send the public key.\n  const jwkPrivateKey = await subtle.exportKey('jwk', kp.privateKey!);\n  jwkPublicKey = await subtle.exportKey('jwk', kp.publicKey!);\n\n  // reimport the private key so it becomes non exportable when persisting.\n  const nonExportPrivateKey = await subtle.importKey('jwk', jwkPrivateKey, EC_IMPORT_PARAMS, false, ['sign']);\n\n  // persist keys\n  await setItem(STORE_KEY_PRIVATE_KEY, nonExportPrivateKey);\n  // persist the jwk public key since it needs to be exported anyways\n  await setItem(STORE_KEY_PUBLIC_JWK, jwkPublicKey);\n}\n\nfunction isWebCryptoSupported() {\n  const hasCrypto = typeof window !== 'undefined' && !!(window.crypto as any);\n  const hasSubtleCrypto = hasCrypto && !!(window.crypto.subtle as any);\n\n  return hasCrypto && hasSubtleCrypto;\n}\n\nfunction strToUrlBase64(str: string) {\n  return binToUrlBase64(utf8ToBinaryString(str));\n}\n\nfunction strToUint8(str: string) {\n  return new TextEncoder().encode(str);\n}\n\nfunction binToUrlBase64(bin: string) {\n  return btoa(bin).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+/g, '');\n}\n\nfunction utf8ToBinaryString(str: string) {\n  const escstr = encodeURIComponent(str);\n  // replaces any uri escape sequence, such as %0A,\n  // with binary escape, such as 0x0A\n  return escstr.replace(/%([0-9A-F]{2})/g, (_, p1) => String.fromCharCode(parseInt(p1, 16)));\n}\n\nfunction uint8ToUrlBase64(uint8: Uint8Array) {\n  let bin = '';\n  uint8.forEach((code) => {\n    bin += String.fromCharCode(code);\n  });\n  return binToUrlBase64(bin);\n}\n","import {\n  GetIdTokenConfiguration,\n  MagicPayloadMethod,\n  MagicUserMetadata,\n  GenerateIdTokenConfiguration,\n  UpdateEmailConfiguration,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { clearKeys } from '../util/web-crypto';\n\ntype UpdateEmailEvents = {\n  'email-sent': () => void;\n  'email-not-deliverable': () => void;\n  'old-email-confirmed': () => void;\n  'new-email-confirmed': () => void;\n  retry: () => void;\n};\n\nexport class UserModule extends BaseModule {\n  /** */\n  public getIdToken(configuration?: GetIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GetIdTokenTestMode : MagicPayloadMethod.GetIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  /** */\n  public generateIdToken(configuration?: GenerateIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GenerateIdTokenTestMode : MagicPayloadMethod.GenerateIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  /** */\n  public getMetadata() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GetMetadataTestMode : MagicPayloadMethod.GetMetadata,\n    );\n    return this.request<MagicUserMetadata>(requestPayload);\n  }\n\n  /** */\n  public updateEmail(configuration: UpdateEmailConfiguration) {\n    const { email, showUI = true } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UpdateEmailTestMode : MagicPayloadMethod.UpdateEmail,\n      [{ email, showUI }],\n    );\n    return this.request<string | null, UpdateEmailEvents>(requestPayload);\n  }\n\n  /** */\n  public isLoggedIn() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.IsLoggedInTestMode : MagicPayloadMethod.IsLoggedIn,\n    );\n    return this.request<boolean>(requestPayload);\n  }\n\n  /** */\n  public logout() {\n    clearKeys();\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LogoutTestMode : MagicPayloadMethod.Logout,\n    );\n    return this.request<boolean>(requestPayload);\n  }\n\n  /** */\n  public showSettings() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UserSettingsTestMode : MagicPayloadMethod.UserSettings,\n    );\n    return this.request<MagicUserMetadata>(requestPayload);\n  }\n}\n","/* eslint-disable consistent-return, prefer-spread */\n\nimport {\n  JsonRpcRequestPayload,\n  JsonRpcRequestCallback,\n  MagicOutgoingWindowMessage,\n  JsonRpcBatchRequestCallback,\n  JsonRpcResponsePayload,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createInvalidArgumentError, MagicRPCError, createSynchronousWeb3MethodWarning } from '../core/sdk-exceptions';\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload, JsonRpcResponse } from '../core/json-rpc';\nimport { PromiEvent } from '../util/promise-tools';\nimport { createTypedEmitter, EventsDefinition, TypedEmitter } from '../util/events';\n\nconst { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter();\n\n/** */\nexport class RPCProviderModule extends BaseModule implements TypedEmitter {\n  // Implements EIP 1193:\n  // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1193.md\n\n  public readonly isMagic = true;\n\n  /* eslint-disable prettier/prettier */\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>, onRequestComplete: JsonRpcRequestCallback): void;\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>[], onRequestComplete: JsonRpcBatchRequestCallback): void;\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void;\n  /* eslint-enable prettier/prettier */\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void {\n    if (!onRequestComplete) {\n      throw createInvalidArgumentError({\n        procedure: 'Magic.rpcProvider.sendAsync',\n        argument: 1,\n        expected: 'function',\n        received: onRequestComplete === null ? 'null' : typeof onRequestComplete,\n      });\n    }\n\n    if (Array.isArray(payload)) {\n      this.overlay\n        .post(\n          MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n          payload.map((p) => {\n            const standardizedPayload = standardizeJsonRpcRequestPayload(p);\n            this.prefixPayloadMethodForTestMode(standardizedPayload);\n            return standardizedPayload;\n          }),\n        )\n        .then((batchResponse) => {\n          (onRequestComplete as JsonRpcBatchRequestCallback)(\n            null,\n            batchResponse.map((response) => ({\n              ...response.payload,\n              error: response.hasError ? new MagicRPCError(response.payload.error) : null,\n            })),\n          );\n        });\n    } else {\n      const finalPayload = standardizeJsonRpcRequestPayload(payload);\n      this.prefixPayloadMethodForTestMode(finalPayload);\n      this.overlay.post(MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST, finalPayload).then((response) => {\n        (onRequestComplete as JsonRpcRequestCallback)(\n          response.hasError ? new MagicRPCError(response.payload.error) : null,\n          response.payload,\n        );\n      });\n    }\n  }\n\n  /* eslint-disable prettier/prettier */\n  public send<ResultType = any>(method: string, params?: any[]): PromiEvent<ResultType>;\n  public send(\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestComplete: JsonRpcRequestCallback,\n  ): void;\n  public send<ResultType>(payload: JsonRpcRequestPayload, none: void): JsonRpcResponsePayload<ResultType>;\n  /* eslint-enable prettier/prettier */\n  public send<ResultType = any>(\n    payloadOrMethod: string | JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestCompleteOrParams: JsonRpcRequestCallback | any[] | void,\n  ): PromiEvent<ResultType> | JsonRpcResponsePayload<ResultType> | void {\n    // Case #1\n    // Web3 >= 1.0.0-beta.38 calls `send` with method and parameters.\n    if (typeof payloadOrMethod === 'string') {\n      const payload = createJsonRpcRequestPayload(\n        payloadOrMethod,\n        Array.isArray(onRequestCompleteOrParams) ? onRequestCompleteOrParams : [],\n      );\n      return this.request(payload) as any;\n    }\n\n    // Case #2\n    // Web3 <= 1.0.0-beta.37 uses `send` with a callback for async queries.\n    if (Array.isArray(payloadOrMethod) || !!onRequestCompleteOrParams) {\n      /* eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion */\n      this.sendAsync(payloadOrMethod, onRequestCompleteOrParams as any);\n      return;\n    }\n\n    // Case #3\n    // Legacy synchronous methods (unsupported).\n    const warning = createSynchronousWeb3MethodWarning();\n    warning.log();\n    return new JsonRpcResponse(payloadOrMethod).applyError({\n      code: -32603,\n      message: warning.rawMessage,\n    }).payload;\n  }\n\n  public enable() {\n    const requestPayload = createJsonRpcRequestPayload('eth_accounts');\n    return this.request<string[]>(requestPayload);\n  }\n\n  /**\n   * Here, we wrap `BaseModule.request` with an additional check\n   * to determine if the RPC method requires a test-mode prefix.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    this.prefixPayloadMethodForTestMode(payload);\n    return super.request<ResultType, Events>(payload);\n  }\n\n  /**\n   * Prefixes Ethereum RPC methods with a `testMode` identifier. This is done so\n   * that Magic's <iframe> can handle signing methods using test-specific keys.\n   */\n  private prefixPayloadMethodForTestMode(payload: Partial<JsonRpcRequestPayload>) {\n    const testModePrefix = 'testMode/eth/';\n\n    // In test mode, we prefix all RPC methods with `test/` so that the\n    // Magic <iframe> can handle them without requiring network calls.\n    if (this.sdk.testMode) {\n      // eslint-disable-next-line no-param-reassign\n      payload.method = `${testModePrefix}${payload.method}`;\n    }\n  }\n\n  public on = createChainingEmitterMethod('on', this);\n  public once = createChainingEmitterMethod('once', this);\n  public addListener = createChainingEmitterMethod('addListener', this);\n\n  public off = createChainingEmitterMethod('off', this);\n  public removeListener = createChainingEmitterMethod('removeListener', this);\n  public removeAllListeners = createChainingEmitterMethod('removeAllListeners', this);\n\n  public emit = createBoundEmitterMethod('emit');\n  public eventNames = createBoundEmitterMethod('eventNames');\n  public listeners = createBoundEmitterMethod('listeners');\n  public listenerCount = createBoundEmitterMethod('listenerCount');\n}\n","/**\n * Builds a `URL` object safely.\n */\nexport function createURL(url: string, base?: string): URL {\n  // Safari raises an error if `undefined` is given to the second argument of\n  // the `URL` constructor.\n  return base ? new URL(url, base) : new URL(url);\n}\n","import { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { BaseModule } from './base-module';\nimport { SDKBase, MagicSDKAdditionalConfiguration, MagicSDKExtensionsOption } from '../core/sdk';\nimport { createExtensionNotInitializedError, MagicExtensionError, MagicExtensionWarning } from '../core/sdk-exceptions';\nimport { createPromiEvent, encodeJSON, decodeJSON, storage, isPromiEvent } from '../util';\n\ntype AnonymousExtension = 'anonymous extension';\n\ninterface BaseExtension<TName extends string = AnonymousExtension> extends BaseModule {\n  /**\n   * A structure describing the platform and version compatiblity of this\n   * extension.\n   */\n  compat?: {\n    'magic-sdk': boolean | string;\n    '@magic-sdk/react-native': boolean | string;\n  };\n}\n\nconst sdkAccessFields = ['request', 'overlay', 'sdk'];\n\n/**\n * From the `BaseExtension`-derived instance, get the prototype\n * chain up to and including the `BaseModule` class.\n */\nfunction getPrototypeChain<T extends BaseExtension<string>>(instance: T) {\n  let currentProto = Object.getPrototypeOf(instance);\n  const protos = [currentProto];\n\n  while (currentProto !== BaseModule.prototype) {\n    currentProto = Object.getPrototypeOf(currentProto);\n    protos.push(currentProto);\n  }\n\n  return protos;\n}\n\nabstract class BaseExtension<TName extends string = AnonymousExtension> extends BaseModule {\n  public abstract readonly name: TName;\n\n  private __sdk_access_field_descriptors__ = new Map<\n    string,\n    { descriptor: PropertyDescriptor; isPrototypeField: boolean }\n  >();\n  private __is_initialized__ = false;\n\n  protected utils = {\n    createPromiEvent,\n    isPromiEvent,\n    encodeJSON,\n    decodeJSON,\n    createJsonRpcRequestPayload,\n    standardizeJsonRpcRequestPayload,\n    storage,\n  };\n\n  constructor() {\n    super(undefined as any);\n\n    // Disallow SDK access before initialization...\n\n    const allSources = [this, ...getPrototypeChain(this)];\n\n    sdkAccessFields.forEach((prop) => {\n      const allDescriptors = allSources.map((source) => Object.getOwnPropertyDescriptor(source, prop));\n      const sourceIndex = allDescriptors.findIndex((x) => !!x);\n      const isPrototypeField = sourceIndex > 0;\n      const descriptor = allDescriptors[sourceIndex];\n\n      /* istanbul ignore else */\n      if (descriptor) {\n        this.__sdk_access_field_descriptors__.set(prop, { descriptor, isPrototypeField });\n\n        Object.defineProperty(this, prop, {\n          configurable: true,\n          get: () => {\n            throw createExtensionNotInitializedError(prop);\n          },\n        });\n      }\n    });\n  }\n\n  /**\n   * Registers a Magic SDK instance with this Extension.\n   *\n   * @internal\n   */\n  public init(sdk: SDKBase) {\n    if (this.__is_initialized__) return;\n\n    // Replace original property descriptors\n    // for SDK access fields post-initialization.\n    sdkAccessFields.forEach((prop) => {\n      /* istanbul ignore else */\n      if (this.__sdk_access_field_descriptors__.has(prop)) {\n        const { descriptor, isPrototypeField } = this.__sdk_access_field_descriptors__.get(prop)!;\n\n        if (isPrototypeField) {\n          // For prototype fields, we just need the `delete` operator so that\n          // the instance will fallback to the prototype chain itself.\n          delete this[prop as keyof this];\n        } else {\n          Object.defineProperty(this, prop, descriptor);\n        }\n      }\n    });\n\n    this.sdk = sdk;\n    this.__is_initialized__ = true;\n  }\n\n  /**\n   * Creates a deprecation warning wrapped with a native Magic SDK warning type.\n   * Best practice is to warn users of upcoming deprecations at least one major\n   * version before the change is implemented. You can use this method to\n   * communicate deprecations in a manner consistent with Magic SDK core code.\n   */\n  protected createDeprecationWarning(options: {\n    method: string;\n    removalVersion: string;\n    useInstead?: string;\n  }): MagicExtensionWarning {\n    const { method, removalVersion, useInstead } = options;\n\n    const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n    const message = `\\`${method}\\` will be removed from this Extension in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n    return new MagicExtensionWarning(this, 'DEPRECATION_NOTICE', message);\n  }\n\n  /**\n   * Creates a warning wrapped with a native Magic SDK warning type. This\n   * maintains consistency in warning messaging for consumers of Magic SDK and\n   * this Extension.\n   */\n  protected createWarning(code: string | number, message: string): MagicExtensionWarning {\n    return new MagicExtensionWarning(this, code, message);\n  }\n\n  /**\n   * Creates an error wrapped with a native Magic SDK error type. This maintains\n   * consistency in error handling for consumers of Magic SDK and this\n   * Extension.\n   */\n  protected createError<TData = any>(code: string | number, message: string, data: TData): MagicExtensionError<TData> {\n    return new MagicExtensionError<TData>(this, code, message, data);\n  }\n}\n\nabstract class InternalExtension<TName extends string, TConfig extends any = any> extends BaseExtension<TName> {\n  public abstract readonly config: TConfig;\n}\n\n/**\n * A base class representing \"extensions\" to the core Magic JS APIs. Extensions\n * enable new functionality by composing Magic endpoints methods together.\n */\nexport abstract class Extension<TName extends string = AnonymousExtension> extends BaseExtension<TName> {\n  /**\n   * This is a special constructor used to mark \"official\" extensions. These\n   * extensions are designed for special interaction with the Magic iframe using\n   * custom JSON RPC methods, business logic, and global configurations. This is\n   * intended for internal-use only (and provides no useful advantage to\n   * open-source extension developers over the regular `Extension` class).\n   *\n   * @internal\n   */\n  public static Internal = InternalExtension;\n  public static Anonymous: AnonymousExtension = 'anonymous extension';\n}\n\n/**\n * These fields are exposed on the `Extension` type,\n * but should be hidden from the public interface.\n */\ntype HiddenExtensionFields = 'name' | 'init' | 'config' | 'compat';\n\n/**\n * Gets the type contained in an array type.\n */\ntype UnwrapArray<T extends any[]> = T extends Array<infer P> ? P : never;\n\n/**\n * Create a union type of Extension names from an\n * array of Extension types given by `TExt`.\n */\ntype ExtensionNames<TExt extends Extension<string>[]> = UnwrapArray<TExt> extends Extension<infer R> ? R : never;\n\n/**\n * From the literal Extension name type given by `TExtName`,\n * extract a dictionary of Extension types.\n */\ntype GetExtensionFromName<TExt extends Extension<string>[], TExtName extends string> = {\n  [P in TExtName]: Extract<UnwrapArray<TExt>, Extension<TExtName>>;\n}[TExtName];\n\n/**\n * Wraps a Magic SDK constructor with the necessary type\n * information to support a strongly-typed `Extension` interface.\n */\nexport type WithExtensions<SDK extends SDKBase> = {\n  new <TCustomExtName extends string, TExt extends MagicSDKExtensionsOption<TCustomExtName>>(\n    apiKey: string,\n    options?: MagicSDKAdditionalConfiguration<TCustomExtName, TExt>,\n  ): InstanceWithExtensions<SDK, TExt>;\n};\n\nexport type InstanceWithExtensions<SDK extends SDKBase, TExt extends MagicSDKExtensionsOption> = SDK &\n  {\n    [P in Exclude<\n      TExt extends Extension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n      number | AnonymousExtension\n    >]: TExt extends Extension<string>[]\n      ? Omit<GetExtensionFromName<TExt, P>, HiddenExtensionFields>\n      : TExt extends {\n          [P in Exclude<\n            TExt extends Extension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n            number | AnonymousExtension\n          >]: Extension<string>;\n        }\n      ? Omit<TExt[P], HiddenExtensionFields>\n      : never;\n  };\n","/* eslint-disable no-param-reassign  */\n\nimport { EthNetworkConfiguration, QueryParameters, SupportedLocale } from '@magic-sdk/types';\nimport type { AbstractProvider } from 'web3-core';\nimport { coerce, satisfies } from '../util/semver';\nimport { encodeJSON } from '../util/base64-json';\nimport {\n  createMissingApiKeyError,\n  createReactNativeEndpointConfigurationWarning,\n  createIncompatibleExtensionsError,\n} from './sdk-exceptions';\nimport { AuthModule } from '../modules/auth';\nimport { UserModule } from '../modules/user';\nimport { RPCProviderModule } from '../modules/rpc-provider';\nimport { ViewController } from './view-controller';\nimport { createURL } from '../util/url';\nimport { Extension } from '../modules/base-extension';\nimport { isEmpty } from '../util/type-guards';\nimport { SDKEnvironment, sdkNameToEnvName } from './sdk-environment';\n\n/**\n * Checks if the given `ext` is compatible with the platform & version of Magic\n * SDK currently in use.\n */\nfunction checkExtensionCompat(ext: Extension<string>) {\n  if (ext.compat && ext.compat[SDKEnvironment.sdkName] != null) {\n    return typeof ext.compat[SDKEnvironment.sdkName] === 'string'\n      ? satisfies(coerce(SDKEnvironment.version), ext.compat[SDKEnvironment.sdkName] as string)\n      : !!ext.compat[SDKEnvironment.sdkName];\n  }\n\n  // To gracefully support older extensions, we assume\n  // compatibility when the `compat` field is missing.\n  return true;\n}\n\n/**\n * Initializes SDK extensions, checks for platform/version compatiblity issues,\n * then consolidates any global configurations provided by those extensions.\n */\nfunction prepareExtensions(this: SDKBase, options?: MagicSDKAdditionalConfiguration): Record<string, any> {\n  const extensions: Extension<string>[] | { [key: string]: Extension<string> } = options?.extensions ?? [];\n  const extConfig: any = {};\n  const incompatibleExtensions: Extension<string>[] = [];\n\n  if (Array.isArray(extensions)) {\n    extensions.forEach((ext) => {\n      if (checkExtensionCompat(ext)) {\n        ext.init(this);\n        if (ext.name || ext.name !== Extension.Anonymous) {\n          // Only apply extensions with a known, defined `name` parameter.\n          (this as any)[ext.name] = ext;\n        }\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[ext.name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(ext);\n      }\n    });\n  } else {\n    Object.keys(extensions).forEach((name) => {\n      if (checkExtensionCompat(extensions[name])) {\n        extensions[name].init(this);\n        const ext = extensions[name];\n        (this as any)[name] = ext;\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[extensions[name].name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(extensions[name]);\n      }\n    });\n  }\n\n  if (incompatibleExtensions.length) {\n    throw createIncompatibleExtensionsError(incompatibleExtensions);\n  }\n\n  return extConfig;\n}\n\nexport type MagicSDKExtensionsOption<TCustomExtName extends string = string> =\n  | Extension<string>[]\n  | { [P in TCustomExtName]: Extension<string> };\n\nexport interface MagicSDKAdditionalConfiguration<\n  TCustomExtName extends string = string,\n  TExt extends MagicSDKExtensionsOption<TCustomExtName> = any,\n> {\n  endpoint?: string;\n  locale?: SupportedLocale;\n  network?: EthNetworkConfiguration;\n  extensions?: TExt;\n  testMode?: boolean;\n}\n\nexport class SDKBase {\n  private static readonly __overlays__: Map<string, ViewController> = new Map();\n\n  protected readonly endpoint: string;\n  protected readonly parameters: string;\n  public readonly testMode: boolean;\n\n  /**\n   * Contains methods for starting a Magic SDK authentication flow.\n   */\n  public readonly auth: AuthModule;\n\n  /**\n   * Contains methods for interacting with user data, checking login\n   * status, generating cryptographically-secure ID tokens, and more.\n   */\n  public readonly user: UserModule;\n\n  /**\n   * Contains a Web3-compliant provider. Pass this module to your Web3/Ethers\n   * instance for automatic compatibility with Ethereum methods.\n   */\n  public readonly rpcProvider: RPCProviderModule & AbstractProvider;\n\n  /**\n   * Creates an instance of Magic SDK.\n   */\n  constructor(public readonly apiKey: string, options?: MagicSDKAdditionalConfiguration) {\n    if (!apiKey) throw createMissingApiKeyError();\n\n    if (SDKEnvironment.platform === 'react-native' && options?.endpoint) {\n      createReactNativeEndpointConfigurationWarning().log();\n    }\n\n    const { defaultEndpoint, version } = SDKEnvironment;\n    this.testMode = !!options?.testMode;\n    this.endpoint = createURL(options?.endpoint ?? defaultEndpoint).origin;\n\n    // Prepare built-in modules\n    this.auth = new AuthModule(this);\n    this.user = new UserModule(this);\n    this.rpcProvider = new RPCProviderModule(this) as any;\n\n    // Prepare extensions\n    const extConfig: any = prepareExtensions.call(this, options);\n\n    // Encode parameters as base64-JSON\n    this.parameters = encodeJSON<QueryParameters>({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : '',\n      ETH_NETWORK: options?.network,\n      host: createURL(this.endpoint).host,\n      sdk: sdkNameToEnvName[SDKEnvironment.sdkName],\n      version,\n      ext: isEmpty(extConfig) ? undefined : extConfig,\n      locale: options?.locale || 'en_US',\n    });\n  }\n\n  /**\n   * Represents the view controller associated with this `MagicSDK` instance.\n   */\n  protected get overlay(): ViewController {\n    if (!SDKBase.__overlays__.has(this.parameters)) {\n      const controller = new SDKEnvironment.ViewController(this.endpoint, this.parameters);\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore - We don't want to expose this method to the user, but we\n      // need to invoke in here so that the `ViewController` is ready for use.\n      controller.init();\n\n      SDKBase.__overlays__.set(this.parameters, controller);\n    }\n\n    return SDKBase.__overlays__.get(this.parameters)!;\n  }\n\n  /**\n   * Preloads the Magic view, allowing for faster initial requests in browser\n   * environments. Awaiting the returned promise will signal when the Magic view\n   * has completed loading and is ready for requests.\n   */\n  public async preload() {\n    await this.overlay.ready;\n  }\n}\n","import {\n  MagicIncomingWindowMessage,\n  MagicOutgoingWindowMessage,\n  JsonRpcRequestPayload,\n  MagicMessageEvent,\n  MagicMessageRequest,\n} from '@magic-sdk/types';\nimport { JsonRpcResponse } from './json-rpc';\nimport { createPromise } from '../util/promise-tools';\nimport { getItem, setItem } from '../util/storage';\nimport { createJwt } from '../util/web-crypto';\nimport { SDKEnvironment } from './sdk-environment';\n\ninterface RemoveEventListenerFunction {\n  (): void;\n}\n\ninterface StandardizedResponse {\n  id?: string | number;\n  response?: JsonRpcResponse;\n}\n\n/**\n * Get the originating payload from a batch request using the specified `id`.\n */\nfunction getRequestPayloadFromBatch(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  id?: string | number | null,\n): JsonRpcRequestPayload | undefined {\n  return id && Array.isArray(requestPayload)\n    ? requestPayload.find((p) => p.id === id)\n    : (requestPayload as JsonRpcRequestPayload);\n}\n\n/**\n * Ensures the incoming response follows the expected schema and parses for a\n * JSON RPC payload ID.\n */\nfunction standardizeResponse(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  event: MagicMessageEvent,\n): StandardizedResponse {\n  const id = event.data.response?.id;\n  const requestPayloadResolved = getRequestPayloadFromBatch(requestPayload, id);\n\n  if (id && requestPayloadResolved) {\n    // Build a standardized response object\n    const response = new JsonRpcResponse(requestPayloadResolved)\n      .applyResult(event.data.response.result)\n      .applyError(event.data.response.error);\n\n    return { id, response };\n  }\n\n  return {};\n}\n\nasync function createMagicRequest(msgType: string, payload: JsonRpcRequestPayload | JsonRpcRequestPayload[]) {\n  const rt = await getItem<string>('rt');\n  let jwt;\n\n  // only for webcrypto platforms\n  if (SDKEnvironment.platform === 'web') {\n    try {\n      jwt = await createJwt();\n    } catch (e) {\n      console.error('webcrypto error', e);\n    }\n  }\n\n  if (!jwt) {\n    return { msgType, payload };\n  }\n\n  if (!rt) {\n    return { msgType, payload, jwt };\n  }\n\n  return { msgType, payload, jwt, rt };\n}\n\nasync function persistMagicEventRefreshToken(event: MagicMessageEvent) {\n  if (!event.data.rt) {\n    return;\n  }\n\n  await setItem('rt', event.data.rt);\n}\n\nexport abstract class ViewController {\n  public ready: Promise<void>;\n  protected readonly messageHandlers = new Set<(event: MagicMessageEvent) => any>();\n\n  /**\n   * Create an instance of `ViewController`\n   *\n   * @param endpoint - The URL for the relevant iframe context.\n   * @param parameters - The unique, encoded query parameters for the\n   * relevant iframe context.\n   */\n  constructor(protected readonly endpoint: string, protected readonly parameters: string) {\n    this.ready = this.waitForReady();\n    this.listen();\n  }\n\n  protected abstract init(): void;\n  protected abstract _post(data: MagicMessageRequest): Promise<void>;\n  protected abstract hideOverlay(): void;\n  protected abstract showOverlay(): void;\n\n  /**\n   * Send a payload to the Magic `<iframe>` for processing and automatically\n   * handle the acknowledging follow-up event(s).\n   *\n   * @param msgType - The type of message to encode with the data.\n   * @param payload - The JSON RPC payload to emit via `window.postMessage`.\n   */\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType>[]>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload,\n  ): Promise<JsonRpcResponse<ResultType>>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType> | JsonRpcResponse<ResultType>[]> {\n    return createPromise(async (resolve) => {\n      await this.ready;\n\n      const batchData: JsonRpcResponse[] = [];\n      const batchIds = Array.isArray(payload) ? payload.map((p) => p.id) : [];\n      const msg = await createMagicRequest(`${msgType}-${this.parameters}`, payload);\n\n      await this._post(msg);\n\n      /**\n       * Collect successful RPC responses and resolve.\n       */\n      const acknowledgeResponse = (removeEventListener: RemoveEventListenerFunction) => (event: MagicMessageEvent) => {\n        const { id, response } = standardizeResponse(payload, event);\n        persistMagicEventRefreshToken(event);\n\n        if (id && response && Array.isArray(payload) && batchIds.includes(id)) {\n          batchData.push(response);\n\n          // For batch requests, we wait for all responses before resolving.\n          if (batchData.length === payload.length) {\n            removeEventListener();\n            resolve(batchData);\n          }\n        } else if (id && response && !Array.isArray(payload) && id === payload.id) {\n          removeEventListener();\n          resolve(response);\n        }\n      };\n\n      // Listen for and handle responses.\n      const removeResponseListener = this.on(\n        MagicIncomingWindowMessage.MAGIC_HANDLE_RESPONSE,\n        acknowledgeResponse(() => removeResponseListener()),\n      );\n    });\n  }\n\n  /**\n   * Listen for events received with the given `msgType`.\n   *\n   * @param msgType - The `msgType` encoded with the event data.\n   * @param handler - A handler function to execute on each event received.\n   * @return A `void` function to remove the attached event.\n   */\n  public on(\n    msgType: MagicIncomingWindowMessage,\n    handler: (this: Window, event: MagicMessageEvent) => any,\n  ): RemoveEventListenerFunction {\n    const boundHandler = handler.bind(window);\n\n    // We cannot effectively cover this function because it never gets reference\n    // by value. The functionality of this callback is tested within\n    // `initMessageListener`.\n    /* istanbul ignore next */\n    const listener = (event: MagicMessageEvent) => {\n      if (event.data.msgType === `${msgType}-${this.parameters}`) boundHandler(event);\n    };\n\n    this.messageHandlers.add(listener);\n    return () => this.messageHandlers.delete(listener);\n  }\n\n  private waitForReady() {\n    return new Promise<void>((resolve) => {\n      this.on(MagicIncomingWindowMessage.MAGIC_OVERLAY_READY, () => resolve());\n    });\n  }\n\n  /**\n   * Listen for messages sent from the underlying Magic `<WebView>`.\n   */\n  private listen() {\n    this.on(MagicIncomingWindowMessage.MAGIC_HIDE_OVERLAY, () => {\n      this.hideOverlay();\n    });\n\n    this.on(MagicIncomingWindowMessage.MAGIC_SHOW_OVERLAY, () => {\n      this.showOverlay();\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}